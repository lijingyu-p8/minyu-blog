import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";import{o as l,c as r,a as e,d as s,e as t,b as a,r as o}from"./app.2463d8bc.js";var c="/minyu-blog/ElasticSearch/10/\u96C6\u7FA4\u5065\u5EB7\u503C-1.png",d="/minyu-blog/ElasticSearch/10/\u9AD8\u53EF\u7528\u6027.png",p="/minyu-blog/ElasticSearch/10/\u5BB9\u9519\u673A\u5236.png";const u={},h=t('<h1 id="elasticsearch\u96C6\u7FA4\u5206\u5E03\u5F0F" tabindex="-1"><a class="header-anchor" href="#elasticsearch\u96C6\u7FA4\u5206\u5E03\u5F0F" aria-hidden="true">#</a> Elasticsearch\u96C6\u7FA4\u5206\u5E03\u5F0F</h1><h2 id="\u4E00\u3001\u76F8\u5173\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u76F8\u5173\u6982\u5FF5" aria-hidden="true">#</a> \u4E00\u3001\u76F8\u5173\u6982\u5FF5</h2><ul><li><p>\u5355\u673A\u670D\u52A1\u6709\u54EA\u4E9B\u95EE\u9898</p><p>\u5355\u673A\u670D\u52A1\u6027\u80FD\u6709\u9650</p><p>\u53EF\u7528\u6027\u5DEE</p><p>\u7EF4\u62A4\u4E0D\u4FBF</p></li><li><p>\u5206\u5E03\u5F0F\u7684\u597D\u5904</p><p>\u9AD8\u53EF\u7528\u6027\uFF1A\u96C6\u7FA4\u53EF\u5BB9\u5FCD\u90E8\u5206\u8282\u70B9\u5B95\u673A\u800C\u4FDD\u6301\u670D\u52A1\u7684\u53EF\u7528\u6027\u548C\u6570\u636E\u7684\u5B8C\u6574\u6027\u3002</p><p>\u6613\u6269\u5C55\uFF1A\u5F53\u96C6\u7FA4\u7684\u6027\u80FD\u4E0D\u6EE1\u8DB3\u4E1A\u52A1\u8981\u6C42\u65F6\uFF0C\u53EF\u4EE5\u65B9\u4FBF\u5FEB\u901F\u7684\u6269\u5BB9\u96C6\u7FA4\uFF0C\u800C\u65E0\u9700\u505C\u6B62\u670D\u52A1\u3002</p><p>\u9AD8\u6027\u80FD\uFF1A\u96C6\u7FA4\u901A\u8FC7\u8D1F\u8F7D\u5747\u8861\u5668\u5206\u644A\u5E76\u53D1\u8BF7\u6C42\u538B\u529B\uFF0C\u53EF\u4EE5\u5927\u5927\u63D0\u9AD8\u96C6\u7FA4\u7684\u541E\u5410\u80FD\u529B\u548C\u5E76\u53D1\u80FD\u529B\u3002</p></li></ul><p>\u914D\u7F6E\u670D\u52A1\u5668\u96C6\u7FA4\u65F6\uFF0C\u96C6\u7FA4\u4E2D\u8282\u70B9\u6570\u91CF\u6CA1\u6709\u9650\u5236\uFF0C\u5927\u4E8E\u7B49\u4E8E 2 \u4E2A\u8282\u70B9\u5C31\u53EF\u4EE5\u770B\u505A\u662F\u96C6\u7FA4\u4E86\u3002\u4E00\u822C\u51FA\u4E8E\u9AD8\u6027\u80FD\u53CA\u9AD8\u53EF\u7528\u65B9\u9762\u6765\u8003\u8651\uFF0C\u96C6\u7FA4\u4E2D\u8282\u70B9\u6570\u91CF\u90FD\u662F 3 \u4E2A\u4EE5\u4E0A\u3002</p><h3 id="_1-1\u3001\u96C6\u7FA4-cluster" tabindex="-1"><a class="header-anchor" href="#_1-1\u3001\u96C6\u7FA4-cluster" aria-hidden="true">#</a> 1.1\u3001\u96C6\u7FA4 Cluster</h3><p>\u4E00\u4E2A\u96C6\u7FA4\u662F\u7531\u4E00\u4E2A\u6216\u591A\u4E2A\u670D\u52A1\u5668\u8282\u70B9\u7EC4\u7EC7\u5728\u4E00\u8D77\uFF0C\u5171\u540C\u6301\u6709\u6574\u4E2A\u7684\u6570\u636E\uFF0C\u5E76\u4E00\u8D77\u63D0\u4F9B\u7D22\u5F15\u548C\u641C\u7D22\u529F\u80FD\u3002\u4E00\u4E2A Elasticsearch \u96C6\u7FA4\u6709\u4E00\u4E2A\u552F\u4E00\u7684\u540D\u5B57\u6807\u8BC6\uFF0C\u8FD9\u4E2A\u540D\u5B57\u901A\u8FC7cluster.name\u8FDB\u884C\u914D\u7F6E\uFF0C\u8FD9\u4E2A\u540D\u5B57\u662F\u91CD\u8981\u7684\uFF0C\u56E0\u4E3A\u4E00\u4E2A\u8282\u70B9\u53EA\u80FD\u901A\u8FC7\u6307\u5B9A\u67D0\u4E2A\u96C6\u7FA4\u7684\u540D\u5B57\uFF0C\u6765\u52A0\u5165\u8FD9\u4E2A\u96C6\u7FA4\u3002</p><h3 id="_1-2\u3001\u8282\u70B9-node" tabindex="-1"><a class="header-anchor" href="#_1-2\u3001\u8282\u70B9-node" aria-hidden="true">#</a> 1.2\u3001\u8282\u70B9 Node</h3><p>\u96C6\u7FA4\u4E2D\u5305\u542B\u5F88\u591A\u670D\u52A1\u5668\uFF0C\u4E00\u4E2A\u8282\u70B9\u5C31\u662F\u5176\u4E2D\u7684\u4E00\u4E2A\u670D\u52A1\u5668\u3002\u4F5C\u4E3A\u96C6\u7FA4\u7684\u4E00\u90E8\u5206\uFF0C\u5B83\u5B58\u50A8\u6570\u636E\uFF0C\u53C2\u4E0E\u96C6\u7FA4\u7684\u7D22\u5F15\u548C\u641C\u7D22\u529F\u80FD\u3002</p><p>\u4E00\u4E2A\u8282\u70B9\u4E5F\u662F\u7531\u4E00\u4E2A\u540D\u5B57\u6765\u6807\u8BC6\u7684\uFF0C\u901A\u8FC7node.name\u914D\u7F6E\u9879\u8FDB\u884C\u914D\u7F6E\uFF0C\u8FD9\u4E2A\u540D\u5B57\u4F1A\u5728\u542F\u52A8\u7684\u65F6\u5019\u8D4B\u4E88\u8282\u70B9\u3002\u8FD9\u4E2A\u540D\u5B57\u5BF9\u4E8E\u7BA1\u7406\u5DE5\u4F5C\u6765\u8BF4\u633A\u91CD\u8981\u7684\uFF0C\u56E0\u4E3A\u5728 \u8FD9\u4E2A\u7BA1\u7406\u8FC7\u7A0B\u4E2D\uFF0C\u4F60\u4F1A\u53BB\u786E\u5B9A\u7F51\u7EDC\u4E2D\u7684\u54EA\u4E9B\u670D\u52A1\u5668\u5BF9\u5E94\u4E8E Elasticsearch \u96C6\u7FA4\u4E2D\u7684\u54EA\u4E9B\u8282\u70B9\u3002</p><p>\u4E00\u4E2A\u8282\u70B9\u53EF\u4EE5\u901A\u8FC7\u914D\u7F6E\u96C6\u7FA4\u540D\u79F0\u7684\u65B9\u5F0F\u6765\u52A0\u5165\u4E00\u4E2A\u6307\u5B9A\u7684\u96C6\u7FA4\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6BCF\u4E2A\u8282\u70B9\u90FD\u4F1A\u88AB\u5B89\u6392\u52A0\u5165\u5230\u4E00\u4E2A\u53EB\u505A\u201Celasticsearch\u201D\u7684\u96C6\u7FA4\u4E2D\uFF0C\u8FD9\u610F\u5473\u7740\uFF0C\u5982\u679C\u4F60\u5728\u4F60\u7684\u7F51\u7EDC\u4E2D\u542F\u52A8\u4E86\u82E5\u5E72\u4E2A\u8282\u70B9\uFF0C\u5E76\u5047\u5B9A\u5B83\u4EEC\u80FD\u591F\u76F8\u4E92\u53D1\u73B0\u5F7C\u6B64\uFF0C\u5B83\u4EEC\u5C06\u4F1A\u81EA\u52A8\u5730\u5F62\u6210\u5E76\u52A0\u5165\u5230\u4E00\u4E2A\u53EB\u505A\u201Celasticsearch\u201D\u7684\u96C6\u7FA4\u4E2D\u3002</p><p>\u5728\u4E00\u4E2A\u96C6\u7FA4\u91CC\uFF0C\u53EA\u8981\u4F60\u60F3\uFF0C\u53EF\u4EE5\u62E5\u6709\u4EFB\u610F\u591A\u4E2A\u8282\u70B9\u3002\u800C\u4E14\uFF0C\u5982\u679C\u5F53\u524D\u4F60\u7684\u7F51\u7EDC\u4E2D\u6CA1\u6709\u8FD0\u884C\u4EFB\u4F55 Elasticsearch \u8282\u70B9\uFF0C\u8FD9\u65F6\u542F\u52A8\u4E00\u4E2A\u8282\u70B9\uFF0C\u4F1A\u9ED8\u8BA4\u521B\u5EFA\u5E76\u52A0\u5165\u4E00\u4E2A\u53EB\u505A\u201Celasticsearch\u201D\u7684\u96C6\u7FA4\u3002</p><h3 id="_1-3\u3001\u7CFB\u7EDF\u67B6\u6784" tabindex="-1"><a class="header-anchor" href="#_1-3\u3001\u7CFB\u7EDF\u67B6\u6784" aria-hidden="true">#</a> 1.3\u3001\u7CFB\u7EDF\u67B6\u6784</h3><p>\u4E00\u4E2A\u8FD0\u884C\u4E2D\u7684 Elasticsearch \u5B9E\u4F8B\u79F0\u4E3A\u4E00\u4E2A\u8282\u70B9\uFF0C\u800C\u96C6\u7FA4\u662F\u7531\u4E00\u4E2A\u6216\u8005\u591A\u4E2A\u62E5\u6709\u76F8\u540Ccluster.name \u914D\u7F6E\u7684\u8282\u70B9\u7EC4\u6210\uFF0C \u5B83\u4EEC\u5171\u540C\u627F\u62C5\u6570\u636E\u548C\u8D1F\u8F7D\u7684\u538B\u529B\u3002\u5F53\u6709\u8282\u70B9\u52A0\u5165\u96C6\u7FA4\u4E2D\u6216\u8005\u4ECE\u96C6\u7FA4\u4E2D\u79FB\u9664\u8282\u70B9\u65F6\uFF0C\u96C6\u7FA4\u5C06\u4F1A\u91CD\u65B0\u5E73\u5747\u5206\u5E03\u6240\u6709\u7684\u6570\u636E\u3002</p><p>\u5F53\u4E00\u4E2A\u8282\u70B9\u88AB\u9009\u4E3E\u6210\u4E3A\u4E3B\u8282\u70B9\u65F6\uFF0C \u5B83\u5C06\u8D1F\u8D23\u7BA1\u7406\u96C6\u7FA4\u8303\u56F4\u5185\u7684\u6240\u6709\u53D8\u66F4\uFF0C\u4F8B\u5982\u589E\u52A0\u3001\u5220\u9664\u7D22\u5F15\uFF0C\u6216\u8005\u589E\u52A0\u3001\u5220\u9664\u8282\u70B9\u7B49\u3002 \u800C\u4E3B\u8282\u70B9\u5E76\u4E0D\u9700\u8981\u6D89\u53CA\u5230\u6587\u6863\u7EA7\u522B\u7684\u53D8\u66F4\u548C\u641C\u7D22\u7B49\u64CD\u4F5C\uFF0C\u6240\u4EE5\u5F53\u96C6\u7FA4\u53EA\u62E5\u6709\u4E00\u4E2A\u4E3B\u8282\u70B9\u7684\u60C5\u51B5\u4E0B\uFF0C\u5373\u4F7F\u6D41\u91CF\u7684\u589E\u52A0\u5B83\u4E5F\u4E0D\u4F1A\u6210\u4E3A\u74F6\u9888\u3002 \u4EFB\u4F55\u8282\u70B9\u90FD\u53EF\u4EE5\u6210\u4E3A\u4E3B\u8282\u70B9\u3002</p><p>\u4F5C\u4E3A\u7528\u6237\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u8BF7\u6C42\u53D1\u9001\u5230\u96C6\u7FA4\u4E2D\u7684\u4EFB\u4F55\u8282\u70B9 \uFF0C\u5305\u62EC\u4E3B\u8282\u70B9\u3002 \u6BCF\u4E2A\u8282\u70B9\u90FD\u77E5\u9053\u4EFB\u610F\u6587\u6863\u6240\u5904\u7684\u4F4D\u7F6E\uFF0C\u5E76\u4E14\u80FD\u591F\u5C06\u6211\u4EEC\u7684\u8BF7\u6C42\u76F4\u63A5\u8F6C\u53D1\u5230\u5B58\u50A8\u6211\u4EEC\u6240\u9700\u6587\u6863\u7684\u8282\u70B9\u3002 \u65E0\u8BBA\u6211\u4EEC\u5C06\u8BF7\u6C42\u53D1\u9001\u5230\u54EA\u4E2A\u8282\u70B9\uFF0C\u5B83\u90FD\u80FD\u8D1F\u8D23\u4ECE\u5404\u4E2A\u5305\u542B\u6211\u4EEC\u6240\u9700\u6587\u6863\u7684\u8282\u70B9\u6536\u96C6\u56DE\u6570\u636E\uFF0C\u5E76\u5C06\u6700\u7EC8\u7ED3\u679C\u8FD4\u56DE\u7D66\u5BA2\u6237\u7AEF\u3002 Elasticsearch \u5BF9\u8FD9\u4E00\u5207\u7684\u7BA1\u7406\u90FD\u662F\u900F\u660E\u7684\u3002</p><h3 id="_1-4\u3001\u96C6\u7FA4\u5065\u5EB7\u503C" tabindex="-1"><a class="header-anchor" href="#_1-4\u3001\u96C6\u7FA4\u5065\u5EB7\u503C" aria-hidden="true">#</a> 1.4\u3001\u96C6\u7FA4\u5065\u5EB7\u503C</h3><p><img src="'+c+`" alt=""></p><ul><li><p>\u5065\u5EB7\u503C\u72B6\u6001</p><ol><li>Green\uFF1A\u6240\u6709Primary\u548CReplica\u5747\u4E3Aactive\uFF0C\u96C6\u7FA4\u5065\u5EB7</li><li>Yellow\uFF1A\u81F3\u5C11\u4E00\u4E2AReplica\u4E0D\u53EF\u7528\uFF0C\u4F46\u662F\u6240\u6709Primary\u5747\u4E3Aactive\uFF0C\u6570\u636E\u4ECD\u7136\u662F\u53EF\u4EE5\u4FDD\u8BC1\u5B8C\u6574\u6027\u7684\u3002</li><li>Red\uFF1A\u81F3\u5C11\u6709\u4E00\u4E2APrimary\u4E3A\u4E0D\u53EF\u7528\u72B6\u6001\uFF0C\u6570\u636E\u4E0D\u5B8C\u6574\uFF0C\u96C6\u7FA4\u4E0D\u53EF\u7528\u3002</li></ol></li><li><p>\u5065\u5EB7\u503C\u68C0\u67E5</p><p>_cat/health</p><p>_cluster/health</p></li></ul><h2 id="\u4E8C\u3001elasticsearch\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001elasticsearch\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u4E8C\u3001ElasticSearch\u914D\u7F6E\u6587\u4EF6</h2><h3 id="_2-1\u3001\u57FA\u7840\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_2-1\u3001\u57FA\u7840\u914D\u7F6E" aria-hidden="true">#</a> 2.1\u3001\u57FA\u7840\u914D\u7F6E</h3><p>config/elasticsearch.yml\u914D\u7F6E\u6587\u4EF6</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#\u96C6\u7FA4\u540D\u79F0\uFF0C\u8282\u70B9\u4E4B\u95F4\u8981\u4FDD\u6301\u4E00\u81F4</span>
<span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>ES
<span class="token comment">#\u8282\u70B9\u540D\u79F0\uFF0C\u96C6\u7FA4\u5185\u8981\u552F\u4E00</span>
<span class="token key atrule">node.name</span><span class="token punctuation">:</span> node<span class="token punctuation">-</span><span class="token number">001</span>
<span class="token comment">#\u914D\u7F6E\u5F53\u524D\u8282\u70B9\u662F\u5426\u4E3Amaster\u8282\u70B9\uFF0C\u8BBE\u7F6E\u4E3Atrue\uFF0C\u624D\u4F1A\u53C2\u4E0E\u9009\u4E3E</span>
<span class="token key atrule">node.master</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#\u914D\u7F6E\u5F53\u524D\u8282\u70B9\u662F\u5426\u5B58\u50A8\u6570\u636E</span>
<span class="token key atrule">node.data</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#\u5B58\u50A8\u6570\u636E\u7684\u8DEF\u5F84\uFF0C\u81EA\u5B9A\u4E49\u3002</span>
<span class="token key atrule">path.data</span><span class="token punctuation">:</span> /path/to/data
<span class="token comment">#\u5B58\u50A8\u65E5\u5FD7\u7684\u8DEF\u5F84\uFF0C\u81EA\u5B9A\u4E49</span>
<span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /path/to/logs
<span class="token comment">#\u662F\u5426\u9501\u5B9A\u5185\u5B58\uFF0C\u7981\u6B62\u4F7F\u7528swap\u533A\u3002\u5EFA\u8BAE\u4E3Atrue\u3002\u5426\u5219\u4F1A\u5E26\u6765\u6027\u80FD\u95EE\u9898</span>
<span class="token key atrule">bootstrap.memory_lock</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#\u5BF9\u5916\u66B4\u9732\u7684ip\u5730\u5740\uFF0C\u6700\u4F73\u72B6\u6001\u4E0B\u4E00\u4E2Aes\u8282\u70B9\u5360\u7528\u4E00\u53F0\u673A\u5668</span>
<span class="token key atrule">network.host</span><span class="token punctuation">:</span> \u5F53\u524D\u6240\u5728\u670D\u52A1\u5668\u7684ip
<span class="token comment">#\u8BBE\u7F6E\u5BF9\u5916\u670D\u52A1\u7684http\u7AEF\u53E3\uFF0C\u9ED8\u8BA4\u4E3A9200</span>
<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9200</span>
<span class="token comment">#\u96C6\u7FA4\u8282\u70B9\u4E4B\u95F4\u901A\u4FE1\u7AEF\u53E3</span>
<span class="token key atrule">transport.tcp.port</span><span class="token punctuation">:</span> <span class="token number">9300</span>
<span class="token comment">#\u914D\u7F6E\u96C6\u7FA4\u4E2D\u5176\u4ED6\u8282\u70B9\u5730\u5740\u3002</span>
<span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;192.168.73.92:9300&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;192.168.73.93:9300&quot;</span><span class="token punctuation">]</span>
<span class="token comment">#\u53EF\u914D\u7F6E\u4E00\u4E2A\u6216\u591A\u4E2A\u8282\u70B9\uFF0C\u7528\u4E8E\u5728es\u96C6\u7FA4\u521D\u59CB\u5316\u65F6\u9009\u4E3E\u4E3B\u8282\u70B9master\uFF0C\u4EC5\u5728\u96C6\u7FA4\u7B2C\u4E00\u6B21\u542F\u52A8\u65F6\u751F\u6548\u3002</span>
<span class="token comment">#\u4E00\u822C\u914D\u7F6E\u4E00\u4E2A\u8282\u70B9\uFF0C\u7701\u7565\u521D\u59CB\u60C5\u51B5\u4E0B\u7684\u96C6\u7FA4\u9009\u4E3E</span>
<span class="token key atrule">cluster.initial_master_nodes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;node-001&quot;</span><span class="token punctuation">]</span>
<span class="token comment">#\u63A7\u5236master\u9009\u4E3E\u8FC7\u7A0B\u4E2D\uFF0C\u53D1\u73B0\u5176\u4ED6node\u5B58\u6D3B\u7684\u8D85\u65F6\u8BBE\u7F6E\uFF0C\u4E3B\u8981\u5F71\u54CD\u9009\u4E3E\u7684\u8017\u65F6\uFF0C\u9ED8\u8BA43s\u5C31\u597D\u3002</span>
<span class="token key atrule">discovery.zen.ping_timeout</span><span class="token punctuation">:</span> 3s
<span class="token comment">#\u5224\u65AD\u8282\u70B9\u662F\u5426\u8131\u79BB\u7684\u8D85\u65F6\u8BBE\u7F6E</span>
<span class="token key atrule">discovery.zen.fd.ping_timeout</span><span class="token punctuation">:</span> 1m
<span class="token comment">#\u8282\u70B9\u8D85\u65F6\u91CD\u8BD5\u6B21\u6570</span>
<span class="token key atrule">discovery.zen.fd.ping_retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
<span class="token comment">#\u5F00\u542F\u6216\u5173\u95ED TCP \u957F\u8FDE\u63A5\uFF0C\u9ED8\u8BA4\u503C\u4E3A true</span>
<span class="token key atrule">network.tcp.keep_alive</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#\u5F00\u542F\u6216\u5173\u95ED TCP \u65E0\u5EF6\u8FDF\u8BBE\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A true</span>
<span class="token key atrule">network.tcp.no_delay</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#\u8BBE\u7F6E\u662F\u5426\u538B\u7F29tcp\u4F20\u8F93\u65F6\u7684\u6570\u636E\uFF0C\u9ED8\u8BA4\u4E3Afalse\uFF0C\u4E0D\u538B\u7F29</span>
<span class="token key atrule">transport.tcp.compress</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#\u7981\u6B62\u4F7F\u7528\u901A\u914D\u7B26\u6216_all\u5220\u9664\u7D22\u5F15\uFF0C\u5FC5\u987B\u4F7F\u7528\u540D\u79F0\u6216\u522B\u540D\u624D\u80FD\u5220\u9664\u7D22\u5F15</span>
<span class="token key atrule">action.destructive_requires_name</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#\u96C6\u7FA4\u5185\u540C\u65F6\u542F\u52A8\u7684\u6570\u636E\u4EFB\u52A1\u4E2A\u6570\uFF0C\u9ED8\u8BA4\u662F 2 \u4E2A</span>
<span class="token key atrule">cluster.routing.allocation.cluster_concurrent_rebalance</span><span class="token punctuation">:</span> <span class="token number">16</span>
<span class="token comment">#\u6DFB\u52A0\u6216\u5220\u9664\u8282\u70B9\u53CA\u8D1F\u8F7D\u5747\u8861\u65F6\u5E76\u53D1\u6062\u590D\u7684\u7EBF\u7A0B\u4E2A\u6570\uFF0C\u9ED8\u8BA4 4 \u4E2A</span>
<span class="token key atrule">cluster.routing.allocation.node_concurrent_recoveries</span><span class="token punctuation">:</span> <span class="token number">16</span>
<span class="token comment">#\u521D\u59CB\u5316\u6570\u636E\u6062\u590D\u65F6\uFF0C\u5E76\u53D1\u6062\u590D\u7EBF\u7A0B\u7684\u4E2A\u6570\uFF0C\u9ED8\u8BA4 4 \u4E2A</span>
<span class="token key atrule">cluster.routing.allocation.node_initial_primaries_recoveries</span><span class="token punctuation">:</span> <span class="token number">16</span>
<span class="token comment">#\u8DE8\u57DF\u914D\u7F6E\uFF0C\u5141\u8BB8\u8DE8\u57DF</span>
<span class="token key atrule">http.cors.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">http.cors.allow-origin</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
<span class="token key atrule">http.max_content_length</span><span class="token punctuation">:</span> 200mb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2\u3001\u672C\u5730\u7F51\u5173\u6A21\u5757\u96C6\u7FA4\u6062\u590D\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_2-2\u3001\u672C\u5730\u7F51\u5173\u6A21\u5757\u96C6\u7FA4\u6062\u590D\u914D\u7F6E" aria-hidden="true">#</a> 2.2\u3001\u672C\u5730\u7F51\u5173\u6A21\u5757\u96C6\u7FA4\u6062\u590D\u914D\u7F6E</h3><p>\u5F53\u4F60\u96C6\u7FA4\u91CD\u542F\u65F6\uFF0C\u51E0\u4E2A\u914D\u7F6E\u9879\u5F71\u54CD\u4F60\u7684\u5206\u7247\u6062\u590D\u7684\u8868\u73B0\u3002 \u9996\u5148\uFF0C\u6211\u4EEC\u9700\u8981\u660E\u767D\u5982\u679C\u4EC0\u4E48\u4E5F\u6CA1\u914D\u7F6E\u5C06\u4F1A\u53D1\u751F\u4EC0\u4E48\u3002</p><p>\u60F3\u8C61\u4E00\u4E0B\u5047\u8BBE\u4F60\u6709 10 \u4E2A\u8282\u70B9\uFF0C\u6BCF\u4E2A\u8282\u70B9\u53EA\u4FDD\u5B58\u4E00\u4E2A\u5206\u7247\uFF0C\u8FD9\u4E2A\u5206\u7247\u662F\u4E00\u4E2A\u4E3B\u5206\u7247\u6216\u8005\u662F\u4E00\u4E2A\u526F\u672C\u5206\u7247\uFF0C\u6216\u8005\u8BF4\u6709\u4E00\u4E2A\u6709 5 \u4E2A\u4E3B\u5206\u7247\uFF0F1 \u4E2A\u526F\u672C\u5206\u7247\u7684\u7D22\u5F15\u3002\u6709\u65F6\u4F60\u9700\u8981\u4E3A\u6574\u4E2A\u96C6\u7FA4\u505A\u79BB\u7EBF\u7EF4\u62A4\uFF08\u6BD4\u5982\uFF0C\u4E3A\u4E86\u5B89\u88C5\u4E00\u4E2A\u65B0\u7684\u9A71\u52A8\u7A0B\u5E8F\uFF09\uFF0C \u5F53\u4F60\u91CD\u542F\u4F60\u7684\u96C6\u7FA4\uFF0C\u6070\u5DE7\u51FA\u73B0\u4E86 5 \u4E2A\u8282\u70B9\u5DF2\u7ECF\u542F\u52A8\uFF0C\u8FD8\u6709 5 \u4E2A\u8FD8\u6CA1\u542F\u52A8\u7684\u573A\u666F\u3002</p><p>\u5047\u8BBE\u5176\u5B83 5 \u4E2A\u8282\u70B9\u51FA\u95EE\u9898\uFF0C\u6216\u8005\u4ED6\u4EEC\u6839\u672C\u6CA1\u6709\u6536\u5230\u7ACB\u5373\u91CD\u542F\u7684\u547D\u4EE4\u3002\u4E0D\u7BA1\u4EC0\u4E48\u539F\u56E0\uFF0C\u4F60\u6709 5 \u4E2A\u8282\u70B9\u5728\u7EBF\u4E0A\uFF0C\u8FD9\u4E94\u4E2A\u8282\u70B9\u4F1A\u76F8\u4E92\u901A\u4FE1\uFF0C\u9009\u51FA\u4E00\u4E2A master\uFF0C\u4ECE\u800C\u5F62\u6210\u4E00\u4E2A\u96C6\u7FA4\u3002 \u4ED6\u4EEC\u6CE8\u610F\u5230\u6570\u636E\u4E0D\u518D\u5747\u5300\u5206\u5E03\uFF0C\u56E0\u4E3A\u6709 5 \u4E2A\u8282\u70B9\u5728\u96C6\u7FA4\u4E2D\u4E22\u5931\u4E86\uFF0C\u6240\u4EE5\u4ED6\u4EEC\u4E4B\u95F4\u4F1A\u7ACB\u5373\u542F\u52A8\u5206\u7247\u590D\u5236\u3002</p><p>\u6700\u540E\uFF0C\u4F60\u7684\u5176\u5B83 5 \u4E2A\u8282\u70B9\u6253\u5F00\u52A0\u5165\u4E86\u96C6\u7FA4\u3002\u8FD9\u4E9B\u8282\u70B9\u4F1A\u53D1\u73B0\u5B83\u4EEC\u7684\u6570\u636E\u6B63\u5728\u88AB\u590D\u5236\u5230\u5176\u4ED6\u8282\u70B9\uFF0C\u6240\u4EE5\u4ED6\u4EEC\u5220\u9664\u672C\u5730\u6570\u636E\uFF08\u56E0\u4E3A\u8FD9\u4EFD\u6570\u636E\u8981\u4E48\u662F\u591A\u4F59\u7684\uFF0C\u8981\u4E48\u662F\u8FC7\u65F6\u7684\uFF09\u3002 \u7136\u540E\u6574\u4E2A\u96C6\u7FA4\u91CD\u65B0\u8FDB\u884C\u5E73\u8861\uFF0C\u56E0\u4E3A\u96C6\u7FA4\u7684\u5927\u5C0F\u5DF2\u7ECF\u4ECE 5 \u53D8\u6210\u4E86 10\u3002</p><p>\u5728\u6574\u4E2A\u8FC7\u7A0B\u4E2D\uFF0C\u4F60\u7684\u8282\u70B9\u4F1A\u6D88\u8017\u78C1\u76D8\u548C\u7F51\u7EDC\u5E26\u5BBD\uFF0C\u6765\u56DE\u79FB\u52A8\u6570\u636E\uFF0C\u56E0\u4E3A\u6CA1\u6709\u66F4\u597D\u7684\u529E\u6CD5\u3002\u5BF9\u4E8E\u6709 TB \u6570\u636E\u7684\u5927\u96C6\u7FA4, \u8FD9\u79CD\u65E0\u7528\u7684\u6570\u636E\u4F20\u8F93\u9700\u8981 \u5F88\u957F\u65F6\u95F4 \u3002\u5982\u679C\u7B49\u5F85\u6240\u6709\u7684\u8282\u70B9\u91CD\u542F\u597D\u4E86\uFF0C\u6574\u4E2A\u96C6\u7FA4\u518D\u4E0A\u7EBF\uFF0C\u6240\u6709\u7684\u672C\u5730\u7684\u6570\u636E\u90FD\u4E0D\u9700\u8981\u79FB\u52A8\u3002</p><p>\u672C\u5730\u7F51\u5173\u6A21\u5757\u5728\u6574\u4E2A\u96C6\u7FA4\u91CD\u65B0\u542F\u52A8\u65F6\u5B58\u50A8\u96C6\u7FA4\u72B6\u6001\u548C\u5206\u7247\u6570\u636E\u3002</p><p>\u4EE5\u4E0B\u53C2\u6570\u662F\u914D\u7F6E \u5C1D\u8BD5\u6062\u590D\u96C6\u7FA4\u72B6\u6001\u548C\u96C6\u7FA4\u6570\u636E \u7684\u89E6\u53D1\u70B9\uFF0C\u5FC5\u987B\u5728\u6BCF\u4E2A\u4E3B\u8282\u70B9\u4E0A\u90FD\u505A\u505A\u5982\u4E0B\u914D\u7F6E\u3002</p><p>config/elasticsearch.yml\u914D\u7F6E\u6587\u4EF6</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#\u9884\u671F\u5728\u96C6\u7FA4\u4E2D\u7684\uFF08\u6570\u636E\u6216\u4E3B\uFF09\u8282\u70B9\u6570\u3002\u53EA\u8981\u9884\u671F\u7684\u8282\u70B9\u6570\u5DF2\u52A0\u5165\u96C6\u7FA4\uFF0C\u5C31\u4F1A\u542F\u52A8\u672C\u5730\u5206\u7247\u7684\u6062\u590D\u3002\u9ED8\u8BA4\u4E3A0</span>
<span class="token key atrule">gateway.expected_nodes</span><span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token comment">#\u9884\u671F\u5728\u96C6\u7FA4\u4E2D\u7684\u4E3B\u8282\u70B9\u6570\u3002\u4E00\u65E6\u9884\u671F\u7684\u4E3B\u8282\u70B9\u6570\u52A0\u5165\u96C6\u7FA4\uFF0C\u5C31\u4F1A\u5F00\u59CB\u6062\u590D\u672C\u5730\u5206\u7247\u3002\u9ED8\u8BA4\u4E3A0</span>
<span class="token key atrule">gateway.expected_master_nodes</span><span class="token punctuation">:</span> <span class="token number">5</span>
<span class="token comment">#\u9884\u671F\u5728\u96C6\u7FA4\u4E2D\u7684\u6570\u636E\u8282\u70B9\u6570\u3002\u4E00\u65E6\u9884\u671F\u6570\u91CF\u7684\u8282\u70B9\u5DF2\u52A0\u5165\u96C6\u7FA4\uFF0C\u5C31\u4F1A\u542F\u52A8\u672C\u5730\u5206\u7247\u7684\u6062\u590D\u3002\u9ED8\u8BA4\u4E3A0</span>
<span class="token key atrule">gateway.expected_data_nodes</span><span class="token punctuation">:</span> <span class="token number">5</span>
<span class="token comment">#\u5982\u679C\u672A\u8FBE\u5230\u9884\u671F\u7684\u8282\u70B9\u6570\uFF0C\u5219\u6062\u590D\u8FC7\u7A0B\u5C06\u7B49\u5F85\u914D\u7F6E\u7684\u65F6\u95F4\u91CF\uFF0C\u7136\u540E\u518D\u5C1D\u8BD5\u6062\u590D\u3002\u5982\u679C\u53EA\u914D\u7F6E\u4E86expected_nodes\uFF0C\u5219\u8FD9\u4E2A\u53C2\u6570\u503C\u9ED8\u8BA4\u4E3A5m</span>
<span class="token key atrule">gateway.recover_after_time</span><span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token comment">#\u4E00\u65E6recover_after_time\u6301\u7EED\u65F6\u95F4\u8D85\u65F6\uFF0C\u53EA\u8981\u6EE1\u8DB3\u4EE5\u4E0B\u6761\u4EF6\uFF0C\u6062\u590D\u5C31\u4F1A\u5F00\u59CB\uFF1A</span>
<span class="token comment">#\u53EA\u8981\u6B64\u6570\u91CF\u7684\u6570\u636E\u6216\u4E3B\u8282\u70B9\u5DF2\u52A0\u5165\u96C6\u7FA4\uFF0C\u5373\u53EF\u6062\u590D\u3002</span>
<span class="token key atrule">gateway.recover_after_nodes</span><span class="token punctuation">:</span> <span class="token number">3</span>
<span class="token comment">#\u53EA\u8981\u8FD9\u4E48\u591A\u4E3B\u8282\u70B9\u5DF2\u52A0\u5165\u96C6\u7FA4\uFF0C\u5C31\u53EF\u4EE5\u6062\u590D\u3002</span>
<span class="token key atrule">gateway.recover_after_master_nodes</span><span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token comment">#\u53EA\u8981\u8FD9\u4E48\u591A\u6570\u636E\u8282\u70B9\u5DF2\u52A0\u5165\u96C6\u7FA4\uFF0C\u5C31\u53EF\u4EE5\u6062\u590D\u3002</span>
<span class="token key atrule">gateway.recover_after_data_nodes</span><span class="token punctuation">:</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E09\u3001es\u5E38\u7528\u8282\u70B9\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001es\u5E38\u7528\u8282\u70B9\u7C7B\u578B" aria-hidden="true">#</a> \u4E09\u3001ES\u5E38\u7528\u8282\u70B9\u7C7B\u578B</h2><h3 id="_3-1\u3001\u5019\u9009\u8282\u70B9-\u6295\u7968\u8282\u70B9master" tabindex="-1"><a class="header-anchor" href="#_3-1\u3001\u5019\u9009\u8282\u70B9-\u6295\u7968\u8282\u70B9master" aria-hidden="true">#</a> 3.1\u3001\u5019\u9009\u8282\u70B9/\u6295\u7968\u8282\u70B9master</h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cmaster-eligible\uFF08\u6709\u65F6\u5019\u4E5F\u53EBmaster\u8282\u70B9\uFF09\u8282\u70B9\u662F\u90A3\u4E9B\u5728\u96C6\u7FA4\u72B6\u6001\u53D1\u5E03\u671F\u95F4\u53C2\u4E0E\u9009\u4E3E\u5E76\u6267\u884C\u67D0\u4E9B\u4EFB\u52A1\u7684\u8282\u70B9\uFF0C\u914D\u7F6E\u4E86master\u89D2\u8272\u7684\u8282\u70B9\u90FD\u662F\u6709\u6548\u7684\u6295\u7968\u8282\u70B9\uFF0C\u53EF\u4EE5\u53C2\u4E0E\u9009\u4E3E\u4E5F\u53EF\u4EE5\u6295\u7968</p><p>\u786C\u4EF6\u8981\u6C42\uFF1A</p><p>CPU\uFF1A\u9AD8</p><p>\u5185\u5B58\uFF1A\u9AD8</p><p>\u7F51\u7EDC\uFF1A\u9AD8</p><p>\u5B58\u50A8\uFF1A\u9AD8</p><hr><h3 id="_3-2\u3001\u4EC5\u6295\u7968\u8282\u70B9voting-only" tabindex="-1"><a class="header-anchor" href="#_3-2\u3001\u4EC5\u6295\u7968\u8282\u70B9voting-only" aria-hidden="true">#</a> 3.2\u3001\u4EC5\u6295\u7968\u8282\u70B9voting_only</h3><p>\u914D\u7F6E\u4E86master\u548Cvoting_only\u89D2\u8272\u7684\u8282\u70B9\u5C06\u6210\u4E3A\u4EC5\u6295\u7968\u8282\u70B9\uFF0C\u4EC5\u6295\u7968\u8282\u70B9\u867D\u7136\u4E5F\u662F\u5019\u9009\u8282\u70B9\uFF0C\u4F46\u662F\u5728\u9009\u4E3E\u8FC7\u7A0B\u4E2D\u4EC5\u53EF\u4EE5\u6295\u7968\u800C\u4E0D\u53C2\u4E0E\u7ADE\u9009\u3002\u4E0D\u8FC7\u4EC5\u6295\u7968\u8282\u70B9\u53EF\u4EE5\u540C\u65F6\u4E5F\u662F\u6570\u636E\u8282\u70B9\uFF0C\u8FD9\u6837\u7684\u8BDD\uFF0C\u5176\u4E0D\u5177\u5907\u88AB\u9009\u4E3E\u4E3AMaster\u7684\u8D44\u683C\uFF0C\u4F46\u662F\u53C2\u4E0E\u6295\u7968\uFF0C\u53EF\u4EE5\u5728\u9009\u4E3E\u8FC7\u7A0B\u4E2D\u53D1\u6325\u5173\u952E\u7968\u7684\u4F5C\u7528\u3002</p><p>\u786C\u4EF6\u8981\u6C42\uFF1A</p><p>CPU\uFF1A\u9AD8</p><p>\u5185\u5B58\uFF1A\u4F4E</p><p>\u7F51\u7EDC\uFF1A\u9AD8</p><p>\u5B58\u50A8\uFF1A\u9AD8</p><hr><h3 id="_3-3\u3001\u4E3B\u8282\u70B9-active-master" tabindex="-1"><a class="header-anchor" href="#_3-3\u3001\u4E3B\u8282\u70B9-active-master" aria-hidden="true">#</a> 3.3\u3001\u4E3B\u8282\u70B9\uFF08active master\uFF09</h3><ul><li>\u907F\u514D\u91CD\u8D1F\u8F7D\uFF1A\u4E3B\u8282\u70B9\u8D1F\u8D23\u8F7B\u91CF\u7EA7\u96C6\u7FA4\u8303\u56F4\u7684\u64CD\u4F5C\uFF0C\u4F8B\u5982\u521B\u5EFA\u6216\u5220\u9664\u7D22\u5F15\u3001\u8DDF\u8E2A\u54EA\u4E9B\u8282\u70B9\u662F\u96C6\u7FA4\u7684\u4E00\u90E8\u5206\u4EE5\u53CA\u51B3\u5B9A\u5C06\u54EA\u4E9B\u5206\u7247\u5206\u914D\u7ED9\u54EA\u4E9B\u8282\u70B9\u3002\u62E5\u6709\u4E00\u4E2A\u7A33\u5B9A\u7684\u4E3B\u8282\u70B9\u5BF9\u4E8E\u96C6\u7FA4\u5065\u5EB7\u5F88\u91CD\u8981\u3002\u5F53\u9009\u7684\u4E3B\u8282\u70B9\u62E5\u6709\u5C65\u884C\u5176\u804C\u8D23\u6240\u9700\u7684\u8D44\u6E90\uFF0C\u8FD9\u5BF9\u4E8E\u96C6\u7FA4\u7684\u5065\u5EB7\u975E\u5E38\u91CD\u8981\u3002\u5982\u679C\u6240\u9009\u7684\u4E3B\u8282\u70B9\u627F\u8F7D\u4E86\u5176\u4ED6\u4EFB\u52A1\uFF0C\u90A3\u4E48\u96C6\u7FA4\u5C06\u4E0D\u80FD\u5F88\u597D\u5730\u8FD0\u884C\u3002\u907F\u514D master \u88AB\u5176\u4ED6\u4EFB\u52A1\u8D85\u8F7D\u7684\u6700\u53EF\u9760\u65B9\u6CD5\u662F\u5C06\u6240\u6709\u7B26\u5408 master \u7684\u8282\u70B9\u914D\u7F6E\u4E3A\u4EC5\u5177\u6709 master \u89D2\u8272\u7684\u4E13\u7528 master \u8282\u70B9\uFF0C\u4F7F\u5B83\u4EEC\u80FD\u591F\u4E13\u6CE8\u4E8E\u7BA1\u7406\u96C6\u7FA4\u3002\u4E13\u7528master\u8282\u70B9\u4ECD\u5C06\u5145\u5F53\u534F\u8C03\u8282\u70B9\uFF0C\u5C06\u8BF7\u6C42\u4ECE\u5BA2\u6237\u7AEF\u8DEF\u7531\u5230\u96C6\u7FA4\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\uFF0C\u4F46\u662F\u4E0D\u8981\u4EE5\u8D1F\u8F7D\u5747\u8861\u5668\u7684\u76EE\u7684\u800C\u8BBE\u7F6E\u5019\u9009\u8282\u70B9\u3002</li><li>\u4E00\u822C\u6765\u8BF4\uFF0C\u5982\u679C\u5C0F\u578B\u6216\u8F7B\u8D1F\u8F7D\u96C6\u7FA4\u7684\u4E3B\u8282\u70B9\u5177\u6709\u5176\u4ED6\u89D2\u8272\u548C\u804C\u8D23\uFF0C\u5219\u5176\u53EF\u80FD\u8FD0\u884C\u826F\u597D\uFF0C\u4F46\u662F\u4E00\u65E6\u96C6\u7FA4\u5305\u542B\u591A\u4E2A\u8282\u70B9\uFF0C\u4F7F\u7528\u4E13\u7528\u7684\u4E3B\u8282\u70B9\u901A\u5E38\u662F\u6709\u610F\u4E49\u7684\u3002</li><li>\u4EFB\u4F55\u4E0D\u662F<code>voting-only</code>\u7684<code>master-eligible</code>\u8282\u70B9\u90FD\u53EF\u4EE5\u88AB\u9009\u4E3E\u4E3A<code>active master</code>\u3002</li><li>\u4E3B\u8282\u70B9\u5FC5\u987B\u6709\u4E00\u4E2A<code>path.data</code>\u76EE\u5F55\uFF0C\u5176\u5185\u5BB9\u5728\u91CD\u542F\u540E\u4ECD\u7136\u5B58\u5728\uFF0C\u5C31\u50CF\u6570\u636E\u8282\u70B9\u4E00\u6837\uFF0C\u56E0\u4E3A\u8FD9\u662F\u5B58\u50A8\u96C6\u7FA4\u5143\u6570\u636E\u7684\u5730\u65B9\u3002\u96C6\u7FA4\u5143\u6570\u636E\u63CF\u8FF0\u4E86\u5982\u4F55\u8BFB\u53D6\u5B58\u50A8\u5728\u6570\u636E\u8282\u70B9\u4E0A\u7684\u6570\u636E\uFF0C\u56E0\u6B64\u5982\u679C\u4E22\u5931\uFF0C\u5219\u65E0\u6CD5\u8BFB\u53D6\u5B58\u50A8\u5728\u6570\u636E\u8282\u70B9\u4E0A\u7684\u6570\u636E\u3002</li><li>\u9AD8\u53EF\u7528\u6027 (HA) \u96C6\u7FA4\u9700\u8981\u81F3\u5C11\u4E09\u4E2A\u5019\u9009\u8282\u70B9\uFF0C\u5176\u4E2D\u81F3\u5C11\u4E24\u4E2A\u4E0D\u662F\u4EC5\u6295\u7968\u8282\u70B9\u3002\u8FD9\u6837\u5373\u4F7F\u5176\u4E2D\u4E00\u4E2A\u8282\u70B9\u53D1\u751F\u6545\u969C\uFF0C\u4E5F\u53EF\u4EE5\u4FDD\u8BC1\u5269\u4E0B\u7684\u8282\u70B9\u80FD\u591F\u9009\u4E3E\u51FA\u4E00\u4E2A\u4E3B\u8282\u70B9\u3002</li></ul><p>\u786C\u4EF6\u8981\u6C42\uFF1A</p><p>CPU\uFF1A\u9AD8</p><p>\u5185\u5B58\uFF1A\u9AD8</p><p>\u7F51\u7EDC\uFF1A\u9AD8</p><p>\u5B58\u50A8\uFF1A\u9AD8 \u4F46\u662F\u65E0\u9700 \u5927</p><hr><h3 id="_3-4\u3001\u6570\u636E\u8282\u70B9data" tabindex="-1"><a class="header-anchor" href="#_3-4\u3001\u6570\u636E\u8282\u70B9data" aria-hidden="true">#</a> 3.4\u3001\u6570\u636E\u8282\u70B9data</h3><p>\u6570\u636E\u8282\u70B9\u4FDD\u5B58\u5305\u542B\u5DF2\u7F16\u5165\u7D22\u5F15\u7684\u6587\u6863\u7684\u5206\u7247\u3002\u6570\u636E\u8282\u70B9\u5904\u7406\u6570\u636E\u76F8\u5173\u64CD\u4F5C\uFF0C\u5982 CRUD\u3001\u641C\u7D22\u548C\u805A\u5408\u3002\u8FD9\u4E9B\u64CD\u4F5C\u662F I/O \u5BC6\u96C6\u578B\u3001\u5185\u5B58\u5BC6\u96C6\u578B\u548C CPU \u5BC6\u96C6\u578B\u7684\u3002\u76D1\u63A7\u8FD9\u4E9B\u8D44\u6E90\u5E76\u5728\u5B83\u4EEC\u8FC7\u8F7D\u65F6\u6DFB\u52A0\u66F4\u591A\u6570\u636E\u8282\u70B9\u975E\u5E38\u91CD\u8981\u3002</p><p>\u786C\u4EF6\u8981\u6C42\uFF1A</p><p>CPU\uFF1A\u9AD8</p><p>\u5185\u5B58\uFF1A\u9AD8</p><p>\u7F51\u7EDC\uFF1A\u9AD8</p><p>\u5B58\u50A8\uFF1A\u901F\u5EA6\u5FEB\u3001\u5BB9\u91CF\u5927</p><hr><h3 id="_3-5\u3001\u534F\u8C03\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#_3-5\u3001\u534F\u8C03\u8282\u70B9" aria-hidden="true">#</a> 3.5\u3001\u534F\u8C03\u8282\u70B9</h3><ul><li>\u5982\u679C\u4E3B\u52A8\u5173\u95ED\u4E86master\u3001data\u548Cingest\u7684\u89D2\u8272\u914D\u7F6E\uFF0C\u5F53\u524D\u8282\u70B9\u5C31\u5269\u4E0B\u4E00\u4E2A\u53EA\u80FD\u8DEF\u7531\u8BF7\u6C42\u3001\u5904\u7406\u641C\u7D22\u51CF\u5C11\u9636\u6BB5\u548C\u5206\u53D1\u6279\u91CF\u7D22\u5F15\u529F\u80FD\u7684<strong>\u4EC5\u534F\u8C03\u8282\u70B9</strong>\u3002\u672C\u8D28\u4E0A\uFF0C\u4EC5\u534F\u8C03\u8282\u70B9\u7684\u5C31\u76F8\u5F53\u4E8E\u4E00\u4E2A\u667A\u80FD\u8D1F\u8F7D\u5747\u8861\u5668\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u4F60\u662F\u6CA1\u6709\u529E\u6CD5\u914D\u7F6E\u4E00\u4E2A\u4E0D\u5177\u5907\u534F\u8C03\u8F6C\u53D1\u80FD\u529B\u7684\u8282\u70B9\u7684\u3002</li><li>\u4EC5\u534F\u8C03\u8282\u70B9\u8FC7\u591A\u4F1A\u589E\u52A0\u96C6\u7FA4\u8D1F\u62C5\uFF0C\u56E0\u4E3A\u4E3B\u8282\u70B9\u66F4\u65B0\u96C6\u7FA4\u72B6\u6001\u5FC5\u987B\u7B49\u5F85\u6BCF\u4E2A\u8282\u70B9\u7684\u786E\u8BA4\uFF0C\u800C\u4EC5\u534F\u8C03\u8282\u70B9\u4ECE\u8FD9\u4E2A\u89D2\u5EA6\u4E0A\u8BB2\u7EAF\u7CB9\u662F\u4E00\u79CD\u8D1F\u62C5\u3002\u6570\u636E\u8282\u70B9\u53EF\u4EE5\u6109\u5FEB\u5730\u5B8C\u6210\u8F6C\u53D1\u4EFB\u52A1\u3002</li></ul><h2 id="\u56DB\u3001\u5206\u7247\u521B\u5EFA\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u5206\u7247\u521B\u5EFA\u7B56\u7565" aria-hidden="true">#</a> \u56DB\u3001\u5206\u7247\u521B\u5EFA\u7B56\u7565</h2><p>Shard\u5373\u6570\u636E\u5206\u7247\uFF0C\u662FES\u7684\u6570\u636E\u8F7D\u4F53\u3002\u5728ES\u4E2D\u6570\u636E\u5206\u4E3Aprimary shard\uFF08\u4E3B\u5206\u7247\uFF09\u548Creplica shard\uFF08\u526F\u672C\u5206\u7247\uFF09\uFF0C\u6BCF\u4E00\u4E2Aprimary\u627F\u8F7D\u5355\u4E2A\u7D22\u5F15\u7684\u4E00\u90E8\u5206\u6570\u636E\uFF0C\u5206\u5E03\u4E8E\u5404\u4E2A\u8282\u70B9\uFF0Creplica\u4E3A\u67D0\u4E2Aprimary\u7684\u526F\u672C\uFF0C\u5373\u5907\u4EFD\u3002\u5206\u7247\u5206\u914D\u7684\u539F\u5219\u662F\u5C3D\u91CF\u5747\u5300\u7684\u5206\u914D\u5728\u96C6\u7FA4\u4E2D\u7684\u5404\u4E2A\u8282\u70B9\uFF0C\u4EE5\u6700\u5927\u7A0B\u5EA6\u964D\u4F4E\u90E8\u5206shard\u5728\u51FA\u73B0\u610F\u5916\u65F6\u5BF9\u6574\u4E2A\u96C6\u7FA4\u4E43\u81F3\u670D\u52A1\u9020\u6210\u7684\u5F71\u54CD\u3002</p><p>\u6BCF\u4E2A\u5206\u7247\u5C31\u662F\u4E00\u4E2ALucene\u7684\u5B9E\u4F8B\uFF0C\u5177\u6709\u5B8C\u6574\u7684\u529F\u80FD\u3002</p><h3 id="_4-1\u3001\u5206\u7247\u521B\u5EFA\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#_4-1\u3001\u5206\u7247\u521B\u5EFA\u7B56\u7565" aria-hidden="true">#</a> 4.1\u3001\u5206\u7247\u521B\u5EFA\u7B56\u7565</h3><p>\u5206\u7247\u4EA7\u751F\u7684\u76EE\u7684\u662F\u4E3A\u4E86\u5B9E\u73B0\u5206\u5E03\u5F0F\uFF0C\u800C\u5206\u5E03\u5F0F\u7684\u597D\u5904\u4E4B\u4E00\u5C31\u662F\u5B9E\u73B0\u201C\u9AD8\u53EF\u7528\u6027\u201D\uFF08\u8FD8\u5305\u62EC\u9AD8\u6027\u80FD\u5982\u63D0\u9AD8\u541E\u5410\u91CF\u7B49\u4F1A\u518D\u540E\u9762\u5185\u5BB9\u5C55\u5F00\u8BB2\uFF09\uFF0C\u5206\u7247\u7684\u5206\u914D\u7B56\u7565\u6781\u5927\u7A0B\u5EA6\u4E0A\u90FD\u662F\u56F4\u7ED5\u5982\u4F55\u63D0\u9AD8\u53EF\u7528\u6027\u800C\u6765\u7684\uFF0C\u5982<strong>\u5206\u7247\u5206\u914D\u611F\u77E5</strong>\u3001<strong>\u5F3A\u5236\u611F\u77E5</strong>\u7B49\u3002</p><p>\u4E92\u8054\u7F51\u5F00\u53D1\u6CA1\u6709\u201C\u94F6\u5F39\u201D\uFF0C\u5206\u7247\u7684\u6570\u91CF\u5206\u914D\u4E5F\u6CA1\u6709\u9002\u7528\u4E8E\u6240\u6709\u573A\u666F\u7684\u6700\u4F73\u503C\uFF0C\u521B\u5EFA\u5206\u7247\u7B56\u7565\u7684\u6700\u4F73\u65B9\u6CD5\u662F\u4F7F\u7528\u60A8\u5728\u751F\u4EA7\u4E2D\u770B\u5230\u7684\u76F8\u540C\u67E5\u8BE2\u548C\u7D22\u5F15\u8D1F\u8F7D\u5728\u751F\u4EA7\u786C\u4EF6\u4E0A\u5BF9\u751F\u4EA7\u6570\u636E\u8FDB\u884C\u57FA\u51C6\u6D4B\u8BD5\u3002\u5206\u7247\u7684\u5206\u914D\u7B56\u7565\u4E3B\u8981\u4ECE\u4E24\u4E2A\u6307\u6807\u6765\u8861\u91CF\uFF1A\u5373\u6570\u91CF\u548C\u5355\u4E2A\u5206\u7247\u7684\u5927\u5C0F\u3002</p><h4 id="\u5206\u7247\u5206\u914D\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u5206\u7247\u5206\u914D\u7B56\u7565" aria-hidden="true">#</a> \u5206\u7247\u5206\u914D\u7B56\u7565</h4><ul><li>ES\u4F7F\u7528\u6570\u636E\u5206\u7247\uFF08shard\uFF09\u6765\u63D0\u9AD8\u670D\u52A1\u7684\u53EF\u7528\u6027\uFF0C\u5C06\u6570\u636E\u5206\u6563\u4FDD\u5B58\u5728\u4E0D\u540C\u7684\u8282\u70B9\u4E0A\u4EE5\u964D\u4F4E\u5F53\u5355\u4E2A\u8282\u70B9\u53D1\u751F\u6545\u969C\u65F6\u5BF9\u6570\u636E\u5B8C\u6574\u6027\u7684\u5F71\u54CD\uFF0C\u540C\u65F6\u4F7F\u7528\u526F\u672C\uFF08repiica\uFF09\u6765\u4FDD\u8BC1\u6570\u636E\u7684\u5B8C\u6574\u6027\u3002\u5173\u4E8E\u5206\u7247\u7684\u9ED8\u8BA4\u5206\u914D\u7B56\u7565\uFF0C\u57287.x\u4E4B\u524D\uFF0C\u9ED8\u8BA45\u4E2Aprimary shard\uFF0C\u6BCF\u4E2Aprimary shard\u9ED8\u8BA4\u5206\u914D\u4E00\u4E2Areplica\uFF0C\u53735\u4E3B1\u526F\uFF0C\u800C7.x\u4E4B\u540E\uFF0C\u9ED8\u8BA41\u4E3B1\u526F</li><li>ES\u5728\u5206\u914D\u5355\u4E2A\u7D22\u5F15\u7684\u5206\u7247\u65F6\u4F1A\u5C06\u6BCF\u4E2A\u5206\u7247\u5C3D\u53EF\u80FD\u5206\u914D\u5230\u66F4\u591A\u7684\u8282\u70B9\u4E0A\u3002\u4F46\u662F\uFF0C\u5B9E\u9645\u60C5\u51B5\u53D6\u51B3\u4E8E\u96C6\u7FA4\u62E5\u6709\u7684\u5206\u7247\u548C\u7D22\u5F15\u7684\u6570\u91CF\u4EE5\u53CA\u5B83\u4EEC\u7684\u5927\u5C0F\uFF0C\u4E0D\u4E00\u5B9A\u603B\u662F\u80FD\u5747\u5300\u5730\u5206\u5E03\u3002</li><li>Paimary\u53EA\u80FD\u5728\u7D22\u5F15\u521B\u5EFA\u65F6\u914D\u7F6E\u6570\u91CF\uFF0C\u800Creplica\u53EF\u4EE5\u5728\u4EFB\u4F55\u65F6\u95F4\u5206\u914D\uFF0C\u5E76\u4E14primary\u652F\u6301\u8BFB\u548C\u5199\u64CD\u4F5C\uFF0C\u800Creplica\u53EA\u652F\u6301\u5BA2\u6237\u7AEF\u7684\u8BFB\u53D6\u64CD\u4F5C\uFF0C\u6570\u636E\u7531es\u81EA\u52A8\u7BA1\u7406\uFF0C\u4ECEprimary\u540C\u6B65\u3002</li><li>ES\u4E0D\u5141\u8BB8Primary\u548C\u5B83\u7684Replica\u653E\u5728\u540C\u4E00\u4E2A\u8282\u70B9\u4E2D\uFF0C\u5E76\u4E14\u540C\u4E00\u4E2A\u8282\u70B9\u4E0D\u63A5\u53D7\u5B8C\u5168\u76F8\u540C\u7684\u4E24\u4E2AReplica\u3002</li><li>\u540C\u4E00\u4E2A\u8282\u70B9\u5141\u8BB8\u591A\u4E2A\u7D22\u5F15\u7684\u5206\u7247\u540C\u65F6\u5B58\u5728\u3002</li></ul><h4 id="\u5206\u7247\u7684\u6570\u91CF" tabindex="-1"><a class="header-anchor" href="#\u5206\u7247\u7684\u6570\u91CF" aria-hidden="true">#</a> \u5206\u7247\u7684\u6570\u91CF</h4>`,76),m=a("\u907F\u514D\u5206\u7247\u8FC7\u591A\uFF1A\u5927\u591A\u6570\u641C\u7D22\u4F1A\u547D\u4E2D\u591A\u4E2A\u5206\u7247\u3002\u6BCF\u4E2A\u5206\u7247\u5728\u5355\u4E2A CPU \u7EBF\u7A0B\u4E0A\u8FD0\u884C\u641C\u7D22\u3002\u867D\u7136\u5206\u7247\u53EF\u4EE5\u8FD0\u884C\u591A\u4E2A\u5E76\u53D1\u641C\u7D22\uFF0C\u4F46\u8DE8\u5927\u91CF\u5206\u7247\u7684"),_={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-threadpool.html",target:"_blank",rel:"noopener noreferrer"},v=a("\u641C\u7D22"),k=a("\u4F1A\u8017\u5C3D\u8282\u70B9\u7684"),b={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-threadpool.html",target:"_blank",rel:"noopener noreferrer"},g=a("\u641C\u7D22\u7EBF\u7A0B\u6C60"),f=a("\u3002\u8FD9\u4F1A\u5BFC\u81F4\u4F4E\u541E\u5410\u91CF\u548C\u7F13\u6162\u7684\u641C\u7D22\u901F\u5EA6\u3002"),y=e("li",null,"\u5206\u7247\u8D8A\u5C11\u8D8A\u597D\uFF1A\u6BCF\u4E2A\u5206\u7247\u90FD\u4F7F\u7528\u5185\u5B58\u548C CPU \u8D44\u6E90\u3002\u5728\u5927\u591A\u6570\u60C5\u51B5\u4E0B\uFF0C\u4E00\u5C0F\u7EC4\u5927\u5206\u7247\u6BD4\u8BB8\u591A\u5C0F\u5206\u7247\u4F7F\u7528\u66F4\u5C11\u7684\u8D44\u6E90\u3002",-1),w=t(`<h4 id="\u5206\u7247\u7684\u5927\u5C0F\u51B3\u7B56" tabindex="-1"><a class="header-anchor" href="#\u5206\u7247\u7684\u5927\u5C0F\u51B3\u7B56" aria-hidden="true">#</a> \u5206\u7247\u7684\u5927\u5C0F\u51B3\u7B56</h4><ul><li>\u5206\u7247\u7684\u5408\u7406\u5BB9\u91CF\uFF1A10GB-50GB\u3002\u867D\u7136\u4E0D\u662F\u786C\u6027\u9650\u5236\uFF0C\u4F46 10GB \u5230 50GB \u4E4B\u95F4\u7684\u5206\u7247\u5F80\u5F80\u6548\u679C\u5F88\u597D\u3002\u6839\u636E\u7F51\u7EDC\u548C\u7528\u4F8B\uFF0C\u4E5F\u8BB8\u53EF\u4EE5\u4F7F\u7528\u66F4\u5927\u7684\u5206\u7247\u3002\u5728\u7D22\u5F15\u7684\u751F\u547D\u5468\u671F\u7BA1\u7406\u4E2D\uFF0C\u4E00\u822C\u8BBE\u7F6E50GB\u4E3A\u5355\u4E2A\u7D22\u5F15\u7684\u6700\u5927\u9608\u503C\u3002</li><li>\u5806\u5185\u5B58\u5BB9\u91CF\u548C\u5206\u7247\u6570\u91CF\u7684\u5173\u8054\uFF1A\u5C0F\u4E8E20\u5206\u7247/\u6BCFGB\u5806\u5185\u5B58\uFF0C\u4E00\u4E2A\u8282\u70B9\u53EF\u4EE5\u5BB9\u7EB3\u7684\u5206\u7247\u6570\u91CF\u4E0E\u8282\u70B9\u7684\u5806\u5185\u5B58\u6210\u6B63\u6BD4\u3002\u4F8B\u5982\uFF0C\u4E00\u4E2A\u62E5\u6709 30GB \u5806\u5185\u5B58\u7684\u8282\u70B9\u6700\u591A\u5E94\u8BE5\u6709 600 \u4E2A\u5206\u7247\u3002\u5982\u679C\u8282\u70B9\u8D85\u8FC7\u6BCF GB 20 \u4E2A\u5206\u7247\uFF0C\u8003\u8651\u6DFB\u52A0\u53E6\u4E00\u4E2A\u8282\u70B9\u3002</li></ul><p>\u67E5\u8BE2\u5F53\u524D\u8282\u70B9\u5806\u5185\u5B58\u5927\u5C0F\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET _cat/nodes?v=<span class="token boolean">true</span>&amp;h=heap.current
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u907F\u514D\u91CD\u8D1F\u8F7D\u8282\u70B9\uFF1A\u5982\u679C\u5206\u914D\u7ED9\u7279\u5B9A\u8282\u70B9\u7684\u5206\u7247\u8FC7\u591A\uFF0C\u4F1A\u9020\u6210\u5F53\u524D\u8282\u70B9\u4E3A\u91CD\u8D1F\u8F7D\u8282\u70B9\u3002</li></ul><h3 id="_4-2\u3001\u91CD\u8981\u7684\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_4-2\u3001\u91CD\u8981\u7684\u914D\u7F6E" aria-hidden="true">#</a> 4.2\u3001\u91CD\u8981\u7684\u914D\u7F6E</h3><h4 id="\u81EA\u5B9A\u4E49\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u5C5E\u6027" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u5C5E\u6027</h4><p>\u5728elasticsearch.yml\u4E2D\u589E\u52A0\u81EA\u5B9A\u4E49\u5C5E\u6027</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>node.attr.<span class="token punctuation">{</span>attribute<span class="token punctuation">}</span><span class="token punctuation">:</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u770B\u8282\u70B9\u5C5E\u6027</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>GET _cat/nodeattrs?v
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u7D22\u5F15\u7EA7\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u7EA7\u914D\u7F6E" aria-hidden="true">#</a> \u7D22\u5F15\u7EA7\u914D\u7F6E</h4><ul><li>index.routing.allocation.include.{attribute}\uFF1A\u8868\u793A\u7D22\u5F15\u53EF\u4EE5\u5206\u914D\u5728\u5305\u542B\u591A\u4E2A\u503C\u4E2D\u5176\u4E2D\u4E00\u4E2A\u7684\u8282\u70B9\u4E0A\u3002</li><li>index.routing.allocation.require.{attribute}\uFF1A\u8868\u793A\u7D22\u5F15\u8981\u5206\u914D\u5728\u5305\u542B\u7D22\u5F15\u6307\u5B9A\u503C\u7684\u8282\u70B9\u4E0A\uFF08\u901A\u5E38\u4E00\u822C\u8BBE\u7F6E\u4E00\u4E2A\u503C\uFF09\u3002</li><li>index.routing.allocation.exclude.{attribute}\uFF1A\u8868\u793A\u7D22\u5F15\u53EA\u80FD\u5206\u914D\u5728\u4E0D\u5305\u542B\u6240\u6709\u6307\u5B9A\u503C\u7684\u8282\u70B9\u4E0A\u3002</li></ul><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//\u7D22\u5F15\u521B\u5EFA\u4E4B\u524D\u6267\u884C</span>
PUT &lt;index_name&gt;
<span class="token punctuation">{</span>
  <span class="token property">&quot;settings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;number_of_shards&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;number_of_replicas&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;index.routing.allocation.include._name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u96C6\u7FA4\u7EA7\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u96C6\u7FA4\u7EA7\u914D\u7F6E" aria-hidden="true">#</a> \u96C6\u7FA4\u7EA7\u914D\u7F6E</h4><p>elasticsearch\u4FEE\u6539\u96C6\u7FA4\u8303\u56F4\u8BBE\u7F6E\u63D0\u4F9B\u4E24\u79CD\u65B9\u5F0F\uFF0C</p><ul><li>persistent\uFF1A\u6C38\u4E45\u6027\u4FEE\u6539\uFF0Cpersistent\u76F8\u5173\u7684\u4FEE\u6539\u4FDD\u5B58\u5728\u4E86<code>/path.data/cluster.name/nodes/0/_state/global-n.st</code>\uFF0C\u5982\u679C\u60F3\u5220\u9664\u8BBE\u7F6E\uFF0C\u5220\u9664\u6B64\u6587\u4EF6\u5373\u53EF\u3002</li><li>transient\uFF1A\u96C6\u7FA4\u91CD\u542F\u540E\u5931\u6548\u3002</li></ul><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT _cluster/settings
<span class="token punctuation">{</span>
  <span class="token property">&quot;persistent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;cluster.routing.allocation.awareness.attributes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rack_id&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3\u3001\u7D22\u5F15\u5206\u7247\u5206\u914D-index-shard-allocation" tabindex="-1"><a class="header-anchor" href="#_4-3\u3001\u7D22\u5F15\u5206\u7247\u5206\u914D-index-shard-allocation" aria-hidden="true">#</a> 4.3\u3001\u7D22\u5F15\u5206\u7247\u5206\u914D\uFF1AIndex Shard Allocation</h3><h4 id="\u5206\u7247\u5747\u8861\u7B56\u7565-shard-rebalance" tabindex="-1"><a class="header-anchor" href="#\u5206\u7247\u5747\u8861\u7B56\u7565-shard-rebalance" aria-hidden="true">#</a> \u5206\u7247\u5747\u8861\u7B56\u7565\uFF1Ashard rebalance</h4>`,20),x=a("\u5F53\u96C6\u7FA4\u5728\u6BCF\u4E2A\u8282\u70B9\u4E0A\u5177\u6709\u76F8\u540C\u6570\u91CF\u7684\u5206\u7247\u800C\u6CA1\u6709\u96C6\u4E2D\u5728\u4EFB\u4F55\u8282\u70B9\u4E0A\u7684\u4EFB\u4F55\u7D22\u5F15\u7684\u5206\u7247\u65F6\uFF0C\u96C6\u7FA4\u662F\u5E73\u8861\u7684\u3002Elasticsearch \u8FD0\u884C\u4E00\u4E2A\u79F0\u4E3A"),E=e("strong",null,"rebalancing",-1),q=a(" \u7684\u81EA\u52A8\u8FC7\u7A0B\uFF0C\u5B83\u5728\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\u4E4B\u95F4\u79FB\u52A8\u5206\u7247\u4EE5\u6539\u5584\u5176\u5E73\u8861\u3002\u91CD\u65B0\u5E73\u8861\u9075\u5FAA\u6240\u6709\u5176\u4ED6\u5206\u7247\u5206\u914D\u89C4\u5219\uFF0C\u4F8B\u5982"),S={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-cluster.html#cluster-shard-allocation-filtering",target:"_blank",rel:"noopener noreferrer"},P=a("\u5206\u914D\u8FC7\u6EE4"),A=a("\u548C"),B={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-cluster.html#forced-awareness",target:"_blank",rel:"noopener noreferrer"},j=a("\u5F3A\u5236\u610F\u8BC6"),C=a("\uFF0C\u8FD9\u53EF\u80FD\u4F1A\u963B\u6B62\u5B83\u5B8C\u5168\u5E73\u8861\u96C6\u7FA4\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u91CD\u65B0\u5E73\u8861\u4F1A\u52AA\u529B\u5728\u914D\u7F6E\u7684\u89C4\u5219\u5185\u5B9E\u73B0\u6700\u5E73\u8861\u7684\u96C6\u7FA4\u3002\u5982\u679C\u4F7F\u7528"),G={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/data-tiers.html",target:"_blank",rel:"noopener noreferrer"},U=a("\u6570\u636E\u5C42"),M=a("\u7136\u540E Elasticsearch \u4F1A\u81EA\u52A8\u5E94\u7528\u5206\u914D\u8FC7\u6EE4\u89C4\u5219\u5C06\u6BCF\u4E2A\u5206\u7247\u653E\u7F6E\u5728\u9002\u5F53\u7684\u5C42\u4E2D\u3002\u8FD9\u4E9B\u89C4\u5219\u610F\u5473\u7740\u5E73\u8861\u5668\u5728\u6BCF\u4E00\u5C42\u5185\u72EC\u7ACB\u5DE5\u4F5C\u3002"),T=e("p",null,[e("strong",null,"cluster.routing.rebalance.enable")],-1),R=a("("),z={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/settings.html#dynamic-cluster-setting",target:"_blank",rel:"noopener noreferrer"},N=a("\u52A8\u6001"),H=a(") \u4E3A\u7279\u5B9A\u7C7B\u578B\u7684\u5206\u7247\u542F\u7528\u6216\u7981\u7528\u91CD\u65B0\u5E73\u8861\uFF1A"),I=t("<ul><li><code>all</code> -\uFF08\u9ED8\u8BA4\uFF09\u5141\u8BB8\u5BF9\u6240\u6709\u7C7B\u578B\u7684\u5206\u7247\u8FDB\u884C\u5206\u7247\u5E73\u8861\u3002</li><li><code>primaries</code> - \u53EA\u5141\u8BB8\u4E3B\u5206\u7247\u7684\u5206\u7247\u5E73\u8861\u3002</li><li><code>replicas</code> - \u4EC5\u5141\u8BB8\u5BF9\u526F\u672C\u5206\u7247\u8FDB\u884C\u5206\u7247\u5E73\u8861\u3002</li><li><code>none</code> - \u4EFB\u4F55\u7D22\u5F15\u90FD\u4E0D\u5141\u8BB8\u8FDB\u884C\u4EFB\u4F55\u7C7B\u578B\u7684\u5206\u7247\u5E73\u8861\u3002</li></ul><p><strong>cluster.routing.allocation.allow_rebalance</strong></p>",2),L=a("("),V={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/settings.html#dynamic-cluster-setting",target:"_blank",rel:"noopener noreferrer"},D=a("\u52A8\u6001"),F=a(") \u6307\u5B9A\u4F55\u65F6\u5141\u8BB8\u5206\u7247\u91CD\u65B0\u5E73\u8861\uFF1A"),O=t('<ul><li><code>always</code> - \u59CB\u7EC8\u5141\u8BB8\u91CD\u65B0\u5E73\u8861\u3002</li><li><code>indices_primaries_active</code> - \u4EC5\u5F53\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u4E3B\u8282\u70B9\u90FD\u5DF2\u5206\u914D\u65F6\u3002</li><li><code>indices_all_active</code> -\uFF08\u9ED8\u8BA4\uFF09\u4EC5\u5F53\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u5206\u7247\uFF08\u4E3B\u5206\u7247\u548C\u526F\u672C\uFF09\u90FD\u88AB\u5206\u914D\u65F6\u3002</li></ul><h4 id="\u5EF6\u8FDF\u5206\u914D\u7B56\u7565-\u9ED8\u8BA41m" tabindex="-1"><a class="header-anchor" href="#\u5EF6\u8FDF\u5206\u914D\u7B56\u7565-\u9ED8\u8BA41m" aria-hidden="true">#</a> \u5EF6\u8FDF\u5206\u914D\u7B56\u7565\uFF08\u9ED8\u8BA41m\uFF09\uFF1A</h4><p>\u5F53\u8282\u70B9\u51FA\u4E8E\u4EFB\u4F55\u539F\u56E0\uFF08\u6709\u610F\u6216\u65E0\u610F\uFF09\u79BB\u5F00\u96C6\u7FA4\u65F6\uFF0C\u4E3B\u8282\u70B9\u4F1A\u505A\u51FA\u4EE5\u4E0B\u53CD\u5E94</p><ul><li>\u5C06\u526F\u672C\u5206\u7247\u63D0\u5347\u4E3A\u4E3B\u5206\u7247\u4EE5\u66FF\u6362\u8282\u70B9\u4E0A\u7684\u4EFB\u4F55\u4E3B\u5206\u7247\u3002</li><li>\u5206\u914D\u526F\u672C\u5206\u7247\u4EE5\u66FF\u6362\u4E22\u5931\u7684\u526F\u672C\uFF08\u5047\u8BBE\u6709\u8DB3\u591F\u7684\u8282\u70B9\uFF09\u3002</li><li>\u5728\u5176\u4F59\u8282\u70B9\u4E4B\u95F4\u5747\u5300\u5730\u91CD\u65B0\u5E73\u8861\u5206\u7247\u3002</li></ul>',4),Y=a("\u8FD9\u4E9B\u64CD\u4F5C\u65E8\u5728\u901A\u8FC7\u786E\u4FDD\u5C3D\u5FEB\u5B8C\u5168\u590D\u5236\u6BCF\u4E2A\u5206\u7247\u6765\u4FDD\u62A4\u96C6\u7FA4\u514D\u53D7\u6570\u636E\u4E22\u5931\u3002\u5373\u4F7F\u6211\u4EEC\u5728"),J={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/recovery.html",target:"_blank",rel:"noopener noreferrer"},K=a("\u8282\u70B9\u7EA7\u522B"),Q=a("\u548C"),W={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/shards-allocation.html",target:"_blank",rel:"noopener noreferrer"},X=a("\u96C6\u7FA4\u7EA7\u522B"),Z=a("\u9650\u5236\u5E76\u53D1\u6062\u590D \uFF0C\u8FD9\u79CD\u201C\u5206\u7247\u6D17\u724C\u201D\u4ECD\u7136\u4F1A\u7ED9\u96C6\u7FA4\u5E26\u6765\u5F88\u591A\u989D\u5916\u7684\u8D1F\u8F7D\uFF0C\u5982\u679C\u4E22\u5931\u7684\u8282\u70B9\u53EF\u80FD\u5F88\u5FEB\u5C31\u4F1A\u8FD4\u56DE\uFF0C\u8FD9\u53EF\u80FD\u662F\u4E0D\u5FC5\u8981\u7684"),$={id:"\u5206\u7247\u8FC7\u6EE4-\u5373-shard-allocation-filtering-\u63A7\u5236\u90A3\u4E2A\u5206\u7247\u5206\u914D\u7ED9\u54EA\u4E2A\u8282\u70B9\u3002",tabindex:"-1"},ee=e("a",{class:"header-anchor",href:"#\u5206\u7247\u8FC7\u6EE4-\u5373-shard-allocation-filtering-\u63A7\u5236\u90A3\u4E2A\u5206\u7247\u5206\u914D\u7ED9\u54EA\u4E2A\u8282\u70B9\u3002","aria-hidden":"true"},"#",-1),ae=a(" \u5206\u7247\u8FC7\u6EE4\uFF1A\u5373\uFF08"),ne={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/shard-allocation-filtering.html",target:"_blank",rel:"noopener noreferrer"},se=a("Shard allocation filtering"),te=a("\uFF09\uFF0C\u63A7\u5236\u90A3\u4E2A\u5206\u7247\u5206\u914D\u7ED9\u54EA\u4E2A\u8282\u70B9\u3002"),ie=t(`<ul><li>index.routing.allocation.include.{attribute}\uFF1A\u8868\u793A\u7D22\u5F15\u53EF\u4EE5\u5206\u914D\u5728\u5305\u542B\u591A\u4E2A\u503C\u4E2D\u5176\u4E2D\u4E00\u4E2A\u7684\u81F3\u5C11\u8282\u70B9\u4E0A\u3002</li><li>index.routing.allocation.require.{attribute}\uFF1A\u8868\u793A\u7D22\u5F15\u8981\u5206\u914D\u5728\u5305\u542B\u7D22\u5F15\u6307\u5B9A\u503C\u7684\u8282\u70B9\u4E0A\uFF08\u901A\u5E38\u4E00\u822C\u8BBE\u7F6E\u4E00\u4E2A\u503C\uFF09\u3002</li><li>index.routing.allocation.exclude.{attribute}\uFF1A\u8868\u793A\u7D22\u5F15\u53EA\u80FD\u5206\u914D\u5728\u4E0D\u5305\u542B\u6240\u6709\u6307\u5B9A\u503C\u7684\u8282\u70B9\u4E0A\u3002</li></ul><h3 id="_4-4\u3001\u5206\u7247\u5206\u914D\u611F\u77E5-shard-allocation-awareness" tabindex="-1"><a class="header-anchor" href="#_4-4\u3001\u5206\u7247\u5206\u914D\u611F\u77E5-shard-allocation-awareness" aria-hidden="true">#</a> 4.4\u3001\u5206\u7247\u5206\u914D\u611F\u77E5\uFF1AShard Allocation Awareness</h3><p>Shard Allocation Awareness\u7684\u8BBE\u8BA1\u521D\u8877\u662F\u4E3A\u4E86\u63D0\u9AD8\u670D\u52A1\u7684\u53EF\u7528\u6027\uFF0C\u901A\u8FC7\u81EA\u5B9A\u4E49\u8282\u70B9\u5C5E\u6027\u4F5C\u4E3A\u611F\u77E5\u5C5E\u6027\uFF0C\u8BA9 Elasticsearch \u5728\u5206\u914D\u5206\u7247\u65F6\u5C06\u7269\u7406\u786C\u4EF6\u914D\u7F6E\u8003\u8651\u5728\u5185\u3002\u5982\u679C Elasticsearch \u77E5\u9053\u54EA\u4E9B\u8282\u70B9\u4F4D\u4E8E\u540C\u4E00\u7269\u7406\u670D\u52A1\u5668\u4E0A\u3001\u540C\u4E00\u673A\u67B6\u4E2D\u6216\u540C\u4E00\u533A\u57DF\u4E2D\uFF0C\u5219\u5B83\u53EF\u4EE5\u5206\u79BB\u4E3B\u526F\u672C\u5206\u7247\uFF0C\u4EE5\u6700\u5927\u7A0B\u5EA6\u5730\u964D\u4F4E\u5728\u53D1\u751F\u6545\u969C\u65F6\u4E22\u5931\u6570\u636E\u7684\u98CE\u9669\u3002</p><h4 id="\u542F\u7528\u5206\u7247\u611F\u77E5\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u542F\u7528\u5206\u7247\u611F\u77E5\u7B56\u7565" aria-hidden="true">#</a> \u542F\u7528\u5206\u7247\u611F\u77E5\u7B56\u7565</h4><p>elasticsearch.yml\u914D\u7F6E\u8282\u70B9\u5C5E\u6027</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">node.attr.rack_id</span><span class="token punctuation">:</span> rack1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u901A\u8FC7\u4EE5\u4E0B\u8BBE\u7F6E\u544A\u8BC9\u4E3B\u8282\u70B9\u5728\u5206\u914D\u5206\u7247\u7684\u65F6\u5019\u9700\u8981\u8003\u8651\u54EA\u4E9B\u5C5E\u6027\u3002\u8FD9\u4E9B\u4FE1\u606F\u4F1A\u4FDD\u5B58\u5728\u6BCF\u4E2A\u5019\u9009\u8282\u70B9\u7684\u96C6\u7FA4\u72B6\u6001\u4FE1\u606F\u4E2D</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>PUT _cluster/settings
<span class="token punctuation">{</span>
  <span class="token property">&quot;persistent&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;cluster.routing.allocation.awareness.attributes&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rack_id&quot;</span> #\u4F9D\u636E\u914D\u7F6E\u7684rack\u673A\u67B6id\uFF0C\u5C06\u5206\u7247\u4F9D\u636E\u4E0D\u540C\u7684\u673A\u67B6\u8FDB\u884C\u5206\u914D
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-5\u3001\u5F3A\u5236\u611F\u77E5\u7B56\u7565-forced-awareness" tabindex="-1"><a class="header-anchor" href="#_4-5\u3001\u5F3A\u5236\u611F\u77E5\u7B56\u7565-forced-awareness" aria-hidden="true">#</a> 4.5\u3001\u5F3A\u5236\u611F\u77E5\u7B56\u7565\uFF1AForced awareness</h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5982\u679C\u4E00\u4E2A\u533A\u57DF\u53D1\u751F\u6545\u969C\uFF0CElasticsearch \u4F1A\u5C06\u6240\u6709\u6545\u969C\u7684\u526F\u672C\u5206\u7247\u5206\u914D\u7ED9\u5176\u4ED6\u533A\u57DF\u3002\u4F46\u662F\u5269\u4F59\u533A\u57DF\u53EF\u80FD\u6CA1\u6709\u8DB3\u591F\u7684\u6027\u80FD\u5197\u4F59\u6765\u627F\u8F7D\u8FD9\u4E9B\u5206\u7247\u3002</p><p>\u4E3A\u4E86\u9632\u6B62\u5728\u53D1\u751F\u6545\u969C\u65F6\u5355\u4E2A\u4F4D\u7F6E\u8FC7\u8F7D\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4E3A<code>cluster.routing.allocation.awareness.force</code>\u4E0D\u5206\u914D\u526F\u672C\uFF0C\u76F4\u5230\u53E6\u4E00\u4E2A\u4F4D\u7F6E\u7684\u8282\u70B9\u53EF\u7528\u3002</p><h4 id="\u90E8\u7F72\u5F3A\u5236\u611F\u77E5\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u90E8\u7F72\u5F3A\u5236\u611F\u77E5\u7B56\u7565" aria-hidden="true">#</a> \u90E8\u7F72\u5F3A\u5236\u611F\u77E5\u7B56\u7565</h4><p>\u8BBE\u7F6E\u5F3A\u5236\u611F\u77E5\u7B56\u7565\uFF0C\u544A\u8BC9\u4E3B\u8282\u70B9\u5F53\u524D\u901A\u8FC7\u67D0\u4E2A\u5C5E\u6027\u6765\u5212\u5206\u533A\u57DF\uFF0C\u5E76\u4E14\u544A\u77E5\u533A\u57DF\u6709\u54EA\u4E9B\u503C</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">cluster.routing.allocation.awareness.attributes</span><span class="token punctuation">:</span> zone
<span class="token key atrule">cluster.routing.allocation.awareness.force.zone.values</span><span class="token punctuation">:</span> zone1<span class="token punctuation">,</span>zone2 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4E94\u3001\u9AD8\u53EF\u7528\u6027-ha" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001\u9AD8\u53EF\u7528\u6027-ha" aria-hidden="true">#</a> \u4E94\u3001\u9AD8\u53EF\u7528\u6027\uFF08HA\uFF09</h2><p>\u9AD8\u53EF\u7528\u6027\u5373\uFF1AHigh Availability\uFF08HA\uFF09\uFF0C\u9AD8\u53EF\u7528\u6027\u662F\u5206\u5E03\u5F0F\u7CFB\u7EDF\u67B6\u6784\u8BBE\u8BA1\u7684\u91CD\u8981\u56E0\u7D20\u4E4B\u4E00\uFF0C\u7B80\u5355\u6765\u8BF4\uFF0C\u53EF\u7528\u6027\u8D8A\u9AD8\u7684\u96C6\u7FA4\u5728\u53D1\u751F\u610F\u5916\u60C5\u51B5\uFF08\u5982\u65AD\u7535\u3001\u8282\u70B9\u5B95\u673A\uFF09\u7684\u65F6\u5019\uFF0C\u670D\u52A1\u53D1\u751F\u6545\u969C\u800C\u4E0D\u53EF\u7528\u7684\u53EF\u80FD\u6027\u8D8A\u4F4E\uFF0C\u4E5F\u5C31\u662F\u964D\u4F4E\u4E86\u610F\u5916\u60C5\u51B5\u800C\u5BF9\u6574\u4F53\u670D\u52A1\u4EA7\u751F\u7684\u5F71\u54CD\u7684\u53EF\u80FD\u6027\u3002</p><h3 id="_5-1\u3001\u9AD8\u53EF\u7528\u6027\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_5-1\u3001\u9AD8\u53EF\u7528\u6027\u539F\u7406" aria-hidden="true">#</a> 5.1\u3001\u9AD8\u53EF\u7528\u6027\u539F\u7406</h3><ul><li>\u901A\u8FC7\u201C\u5206\u5E03\u5F0F\u201D\u7684\u6982\u5FF5\u5B9E\u73B0\u591A\u4E2A\u8282\u70B9\u7684\u8D1F\u8F7D\u5747\u8861\uFF0C\u5E76\u4E14\u4F7F\u670D\u52A1\u5177\u5907\u53EF\u6269\u5C55\u80FD\u529B\u3002</li><li>\u901A\u8FC7\u9488\u5BF9\u5206\u7247\u3001\u8282\u70B9\u7684\u4E00\u5217\u7B56\u7565\u964D\u4F4E\u5355\u4E2A\u6545\u969C\u70B9\u5BF9\u6574\u4F53\u670D\u52A1\u4EA7\u751F\u7684\u5F71\u54CD\u3002</li><li>\u901A\u8FC7\u5BB9\u707E\u673A\u5236\uFF0C\u5C3D\u53EF\u80FD\u628A\u6545\u969C\u70B9\u8FD8\u539F\uFF0C\u4EE5\u6062\u590D\u670D\u52A1\u7684\u6700\u5927\u53EF\u7528\u6027\u3002</li></ul><p><img src="`+d+'" alt=""></p><ul><li>\u5C3D\u53EF\u80FD\u7684\u5C06\u8282\u70B9\u5747\u5300\u7684\u5206\u5E03\u5728\u591A\u4E2A\u8282\u70B9\u4E0A\uFF0C\u5E76\u4E14\u53EF\u4EE5\u5C3D\u91CF\u5C11\u7684\u8282\u70B9\u5C31\u53EF\u4EE5\u627E\u5230\u5B8C\u6574\u6570\u636E\uFF0C\u53EF\u4EE5\u63D0\u5347\u670D\u52A1\u8D1F\u8F7D\u80FD\u529B\uFF0C\u4E5F\u53EF\u4EE5\u63D0\u5347\u53EF\u7528\u6027\u3002\u4F8B\u5982\u4E0A\u56FE\uFF0C1\u4E2A\u526F\u672C\u7684\u53EF\u7528\u6027\u662F\u5BB9\u5FCD1\u53F0\u5B95\u673A\uFF0C\u4F46\u662F2\u4E2A\u526F\u672C\u7684\u5206\u7247\u7B56\u7565\uFF0C\u5C31\u53EF\u4EE5\u5BB9\u5FCD2\u53F0\u8282\u70B9\u5B95\u673A\u3002</li></ul><h3 id="_5-2\u3001es\u7684\u5BB9\u707E\u673A\u5236-\u6545\u969C\u8F6C\u79FB" tabindex="-1"><a class="header-anchor" href="#_5-2\u3001es\u7684\u5BB9\u707E\u673A\u5236-\u6545\u969C\u8F6C\u79FB" aria-hidden="true">#</a> 5.2\u3001ES\u7684\u5BB9\u707E\u673A\u5236\uFF08\u6545\u969C\u8F6C\u79FB\uFF09</h3><p>\u5BB9\u9519\u6027\u53EF\u4EE5\u7406\u89E3\u4E3A\u7CFB\u7EDF\u5BB9\u5FCD\u7684\u5C40\u90E8\u53D1\u751F\u5F02\u5E38\u60C5\u51B5\u7684\u6BD4\u7387\u548C\u5F53\u5F02\u5E38\u53D1\u751F\u65F6\u81EA\u884C\u6062\u590D\u7684\u80FD\u529B\u3002\u5728<code>ES</code>\u4E2D\u8868\u73B0\u4E3A\u5BF9\u8282\u70B9\u5B95\u673A\u7684\u5904\u7406\u673A\u5236\u3002</p><p><img src="'+p+`" alt=""></p><p>\u6B65\u9AA4\uFF1A</p><ol><li>Master\u9009\u4E3E\uFF1A\u5047\u5982\u5B95\u673A\u7684\u662Fmaster\uFF0C\u9996\u5148\u9009\u51FA\u96C6\u7FA4\u4E2D\u7684\u65B0Leader\u3002</li><li>Replica\u5BB9\u9519\uFF1A\u65B0\u7684<code>Active Master</code>\u4F1A\u5C06\u4E22\u5931\u7684Primary\u7684\u67D0\u4E2AReplica\u63D0\u5347\u4E3APrimary\u3002</li><li>\u5C1D\u8BD5\u6062\u590D\u6545\u969C\u8282\u70B9\uFF1AMaster\u5C1D\u8BD5\u6062\u590D\u6545\u969C\u8282\u70B9\u3002</li><li>\u6570\u636E\u540C\u6B65\uFF1AMaster\u5C06\u5B95\u673A\u671F\u95F4\u4E22\u5931\u7684\u6570\u636E\u540C\u6B65\u5230\u91CD\u542F\u8282\u70B9\u5BF9\u5E94\u7684\u5206\u7247\u4E0A\u53BB\uFF0C\u4ECE\u800C\u4F7F\u670D\u52A1\u6062\u590D\u6B63\u5E38\u3002</li></ol><h3 id="_5-3\u3001master\u8282\u70B9\u548C\u6295\u7968\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#_5-3\u3001master\u8282\u70B9\u548C\u6295\u7968\u8282\u70B9" aria-hidden="true">#</a> 5.3\u3001Master\u8282\u70B9\u548C\u6295\u7968\u8282\u70B9</h3><h4 id="\u4E3B\u8282\u70B9\u804C\u8D23" tabindex="-1"><a class="header-anchor" href="#\u4E3B\u8282\u70B9\u804C\u8D23" aria-hidden="true">#</a> \u4E3B\u8282\u70B9\u804C\u8D23</h4><p>\u8D1F\u8D23\u8F7B\u91CF\u7EA7\u96C6\u7FA4\u8303\u56F4\u7684\u64CD\u4F5C\uFF0C\u6BD4\u5982\uFF1A</p><ul><li>\u521B\u5EFA\u6216\u5220\u9664\u7D22\u5F15</li><li>\u89C4\u5212\u548C\u6267\u884C\u5206\u7247\u7B56\u7565</li><li>\u53D1\u5E03\u3001\u4FEE\u6539\u96C6\u7FA4\u72B6\u6001</li></ul><p>\u9009\u62E9\u7684\u4E3B\u8282\u70B9\u62E5\u6709\u5C65\u884C\u5176\u804C\u8D23\u6240\u9700\u7684\u8D44\u6E90\uFF0C\u8FD9\u5BF9\u4E8E\u96C6\u7FA4\u7684\u5065\u5EB7\u975E\u5E38\u91CD\u8981\u3002\u5982\u679C\u9009\u62E9\u7684\u4E3B\u8282\u70B9\u88AB\u5176\u4ED6\u4EFB\u52A1\u91CD\u8F7D\uFF0C\u90A3\u4E48\u96C6\u7FA4\u5C06\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C\u3002\u907F\u514D\u4E3B\u673A\u56E0\u5176\u4ED6\u4EFB\u52A1\u800C\u8FC7\u8F7D\u7684\u6700\u53EF\u9760\u65B9\u6CD5\u662F\u5C06\u6240\u6709\u7B26\u5408\u4E3B\u673A\u6761\u4EF6\u7684\u8282\u70B9\u914D\u7F6E\u4E3A<code>dedicated master</code></p><p>\u914D\u7F6E\u89D2\u8272\u4E3Amaster</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">node.roles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u6295\u7968\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u6295\u7968\u8282\u70B9" aria-hidden="true">#</a> \u6295\u7968\u8282\u70B9</h4><p>\u6BCF\u4E2A\u5019\u9009\u8282\u70B9\u9ED8\u8BA4\u6709<strong>\u9009\u4E3E\u6743</strong>\u548C<strong>\u88AB\u9009\u4E3E\u6743</strong>\uFF0C\u79F0\u4E4B\u4E3A\u6295\u7968\u8282\u70B9\u3002\u6295\u7968\u8282\u70B9\u53EF\u4EE5\u53C2\u52A0Master\u7ADE\u9009\uFF0C\u540C\u65F6\u4E5F\u53EF\u4EE5\u53C2\u52A0\u6295\u7968\u3002</p><p>\u4F46\u662F\u6709\u4E00\u79CD\u6295\u7968\u8282\u70B9\u6BD4\u8F83\u7279\u6B8A\uFF0C\u5176\u53EA\u5177\u5907\u9009\u4E3E\u6743\u800C\u4E0D\u5177\u5907\u88AB\u9009\u4E3E\u6743\uFF0C\u4E5F\u5C31\u662F\u201C\u4EC5\u6295\u7968\u201D\u8282\u70B9\uFF0C\u4EC5\u6295\u7968\u8282\u70B9\u53EA\u80FD\u5728Master\u9009\u4E3E\u8FC7\u7A0B\u4E2D\u53C2\u4E0E\u6295\u7968\uFF0C\u800C\u4E0D\u80FD\u53C2\u52A0\u7ADE\u9009\u3002\u4EC5\u6295\u7968\u5728\u67D0\u4E9B\u573A\u666F\u4E0B\u53D1\u6325\u7740\u6781\u5176\u91CD\u8981\u7684\u4F5C\u7528\uFF1A</p><ul><li>\u5F53\u73B0\u6709\u7968\u6570\u4E0D\u8DB3\u4EE5\u9009\u51FAMaster\u7684\u65F6\u5019\uFF0C\u5145\u5F53\u51B3\u80DC\u7968\u3002</li><li>\u5728\u5C0F\u578B\u96C6\u7FA4\u4E2D\u4EC5\u6295\u7968\u8282\u70B9\u53EF\u540C\u65F6\u4F5C\u4E3A\u6570\u636E\u8282\u70B9\u907F\u514D\u8D44\u6E90\u6D6A\u8D39</li></ul><p>\u914D\u7F6E\u4EC5\u6295\u7968\u8282\u70B9</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">node.roles</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> master<span class="token punctuation">,</span> voting_only <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_5-4\u3001\u9AD8\u53EF\u7528\u6027\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#_5-4\u3001\u9AD8\u53EF\u7528\u6027\u96C6\u7FA4" aria-hidden="true">#</a> 5.4\u3001\u9AD8\u53EF\u7528\u6027\u96C6\u7FA4\uFF1A</h3><p>\u9AD8\u53EF\u7528\u6027\u7684\u4E2D\u5FC3\u601D\u60F3\u5C31\u662F\u91C7\u53D6\u4E00\u5207\u53EF\u80FD\u7684\u7B56\u7565\uFF0C\u964D\u4F4E\u96C6\u7FA4\u4E2D\u4EFB\u610F\u4E00\u90E8\u5206\u8282\u70B9\u51FA\u73B0\u95EE\u9898\u540E\u5BFC\u81F4\u670D\u52A1\u6574\u4F53\u4E0D\u53EF\u7528\u7684\u6982\u7387\u3002\u5176\u5305\u542B\u6570\u636E\u7684\u5B8C\u6574\u6027\uFF0C\u96C6\u7FA4\u7684\u5B58\u6D3B\u6982\u7387\u4EE5\u53CA\u9009\u4E3B\u7B49\u3002</p><h4 id="\u5C0F\u89C4\u6A21\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#\u5C0F\u89C4\u6A21\u96C6\u7FA4" aria-hidden="true">#</a> \u5C0F\u89C4\u6A21\u96C6\u7FA4</h4>`,41),le=e("p",null,"\u5355\u8282\u70B9\u96C6\u7FA4\uFF1A",-1),re=a("\u4E00\u822C\u7528\u4E8E\u5B66\u4E60\u6216\u8005\u5F00\u53D1\u3001\u6D4B\u8BD5\u73AF\u5883\uFF0C\u4E0D\u63A8\u8350\u5728\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u5355\u8282\u70B9\u96C6\u7FA4\u3002\u7531\u4E8E\u96C6\u7FA4\u53EA\u6709\u5355\u4E2A\u8282\u70B9\uFF0C\u4E3A\u4E86\u9002\u5E94\u8FD9\u4E00\u70B9\uFF0CES\u9ED8\u8BA4\u4F1A\u7ED9\u96C6\u7FA4\u5206\u914D\u6240\u6709\u89D2\u8272\u3002\u5355\u8282\u70B9\u89D2\u8272\u4E0D\u5177\u5907\u9AD8\u53EF\u7528\u6027\uFF0C\u5E76\u4E14\u65E0\u6CD5\u5206\u914D\u526F\u672C\u5206\u7247\u3002\u4E3A\u4E86\u4F7F\u96C6\u7FA4\u4FDD\u6301\u5065\u5EB7\uFF0C\u5355\u8282\u70B9\u6A21\u5F0F\u4E0B\u521B\u5EFA\u7D22\u5F15\uFF0C\u9700\u8981\u4F7F\u7528"),oe={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/index-modules.html#dynamic-index-settings",target:"_blank",rel:"noopener noreferrer"},ce=e("code",null,"index.number_of_replicas",-1),de=a("\u8BBE\u7F6E\u526F\u672C\u6570\u91CF\u4E3A0\u3002"),pe=e("p",null,"\u4E24\u8282\u70B9\u96C6\u7FA4\uFF1A",-1),ue=a("\u5982\u679C\u51FA\u4E8E\u786C\u4EF6\u6210\u672C\u8003\u8651\uFF0C\u96C6\u7FA4\u4E2D\u53EA\u5141\u8BB8\u6709\u4E24\u4E2A\u8282\u70B9\uFF0C\u90A3\u4E48\u4E00\u822C\u6765\u8BF4\u6700\u597D\u628A\u4E24\u4E2A\u8282\u70B9\u90FD\u8BBE\u7F6E\u6210\u6570\u636E\u8282\u70B9\u3002\u60A8\u8FD8\u5E94\u8BE5\u901A\u8FC7\u8BBE\u7F6E\u7D22\u5F15\u786E\u4FDD\u6BCF\u4E2A\u5206\u7247\u90FD\u5728\u4E24\u4E2A\u8282\u70B9\u4E0A\u5197\u4F59\u5B58\u50A8\u3002\u6BCF\u4E2A\u975E\u53EF\u641C\u7D22\u5FEB\u7167\u7D22\u5F15\u4E0A\u7684"),he=e("code",null,"Number_of_replicas",-1),me=a("\u4E3A1\u3002\u8FD9\u662F\u9ED8\u8BA4\u884C\u4E3A\uFF0C\u4F46\u53EF\u80FD\u4F1A\u88AB"),_e={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/index-templates.html",target:"_blank",rel:"noopener noreferrer"},ve=a("\u7D22\u5F15\u6A21\u677F"),ke=a("\u8986\u76D6\u3002"),be={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/index-modules.html#dynamic-index-settings",target:"_blank",rel:"noopener noreferrer"},ge=a("Auto-expand replicas"),fe=a("\u4E5F\u53EF\u4EE5\u8FBE\u5230\u540C\u6837\u7684\u6548\u679C\uFF0C\u4F46\u662F\u5728\u8FD9\u4E48\u5C0F\u7684\u96C6\u7FA4\u4E2D\u6CA1\u6709\u5FC5\u8981\u4F7F\u7528\u8FD9\u4E2A\u529F\u80FD\u3002"),ye=e("li",null,[a("\u63A8\u8350\u5728\u4E24\u4E2A\u8282\u70B9\u4E4B\u4E00\u8BBE\u7F6E"),e("code",null,"node.master: false"),a("\u660E\u786E\u544A\u77E5\u5176\u4E0D\u5177\u5907\u5019\u9009\u8282\u70B9\u8D44\u683C\u3002\u76EE\u7684\u662F\u4E3A\u4E86\u786E\u5B9A\u54EA\u4E2A\u8282\u70B9\u662F\u4E3B\u8282\u70B9\u3002\u96C6\u7FA4\u53EF\u4EE5\u5BB9\u5FCD\u53E6\u4E00\u4E2A\u4E0D\u5177\u5907\u5019\u9009\u8D44\u683C\u7684\u8282\u70B9\u7684\u4E22\u5931\u3002\u5982\u679C\u4E0D\u505A\u6B64\u8BBE\u7F6E\uFF0C\u8FD9\u65F6\u4E24\u4E2A\u8282\u70B9\u90FD\u4F1A\u5177\u6709\u5019\u9009\u8D44\u683C\uFF0C\u4F46\u662F\u5176\u4E2D\u4E00\u4E2A\u8282\u70B9\u5982\u679C\u5B95\u673A\uFF0C\u7531\u4E8E\u9009\u4E3B\u9700\u8981\u7968\u6570\u8FC7\u534A\uFF08\u7968\u6570>N/2+1\uFF09\uFF0C\u4E5F\u5C31\u662F\u7968\u6570\u5FC5\u987B\u662F\u4E24\u7968\u624D\u80FD\u9009\u51FAactive master\uFF0C\u6240\u4EE5\u4F1A\u5BFC\u81F4\u65E0\u6CD5\u9009\u4E3B\u3002\u6B64\u65F6\u96C6\u7FA4\u65E0\u6CD5\u5BB9\u5FCD\u4EFB\u4F55\u4E00\u4E2A\u8282\u70B9\u5B95\u673A")],-1),we=e("li",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CES\u4F1A\u4E3A\u6BCF\u4E2A\u8282\u70B9\u5206\u914D\u6240\u6709\u89D2\u8272\uFF0C\u5982\u679C\u624B\u52A8\u5206\u914D\u89D2\u8272\uFF0C\u4E00\u822C\u5EFA\u8BAE\u4E3A\u6BCF\u4E2A\u8282\u70B9\u5206\u914D\u6240\u6709\u89D2\u8272\uFF0C\u5982\u679C\u5176\u4E2D\u4E00\u4E2A\u8282\u70B9\u5B95\u673A\uFF0C\u53E6\u4E00\u4E2A\u8282\u70B9\u53EF\u4EE5\u53D6\u800C\u4EE3\u4E4B\u3002",-1),xe=e("li",null,"\u4E24\u4E2A\u8282\u70B9\u7684\u96C6\u7FA4\uFF0C\u53EA\u5141\u8BB8\u5176\u4E2D\u4E00\u4E2A\u56FA\u5B9A\u7684\u8282\u70B9\u5B95\u673A\uFF0C\u800C\u4E0D\u662F\u4EFB\u610F\u4E00\u4E2A\u8282\u70B9\u3002\u56E0\u4E3A\u5982\u679C\u5141\u8BB8\u4E24\u4E2A\u8282\u70B9\u53EF\u4EE5\u72EC\u7ACB\u9009\u4E3E\uFF0C\u90A3\u4E48\u5982\u679C\u96C6\u7FA4\u7531\u4E8E\u7F51\u7EDC\u6216\u8005\u5176\u4ED6\u539F\u56E0\u5BFC\u81F4\u8282\u70B9\u8FDE\u63A5\u65AD\u5F00\uFF0C\u90A3\u4E48\u4E24\u4E2A\u8282\u70B9\u6CA1\u529E\u6CD5\u786E\u5B9A\u53E6\u4E00\u4E2A\u8282\u70B9\u662F\u5426\u662F\u5B95\u673A\u4E86\uFF0C\u4E5F\u5C31\u662F\u4F1A\u4EA7\u751F\u6240\u8C13\u7684\u201D\u8111\u88C2\u201C\u95EE\u9898\uFF0C\u800C\u4EA7\u751F\u591A\u4E3B\u7684\u60C5\u51B5\u3002Elasticsearch \u907F\u514D\u4E86\u8FD9\u79CD\u60C5\u51B5\u5E76\u901A\u8FC7\u4E0D\u9009\u62E9\u4EFB\u4F55\u4E00\u4E2A\u8282\u70B9\u4F5C\u4E3A\u4E3B\u8282\u70B9\u6765\u4FDD\u62A4\u6570\u636E\uFF0C\u76F4\u5230\u8BE5\u8282\u70B9\u53EF\u4EE5\u786E\u4FDD\u5B83\u5177\u6709\u6700\u65B0\u7684\u96C6\u7FA4\u72B6\u6001\u5E76\u4E14\u96C6\u7FA4\u4E2D\u6CA1\u6709\u5176\u4ED6\u4E3B\u8282\u70B9\u3002\u8FD9\u53EF\u80FD\u5BFC\u81F4\u96C6\u7FA4\u5728\u8FDE\u63A5\u6062\u590D\u4E4B\u524D\u6CA1\u6709\u4E3B\u8282\u70B9\u3002",-1),Ee=t("<li><p>\u4E09\u8282\u70B9\u96C6\u7FA4 &lt;HA\u7684\u6700\u4F4E\u914D\u7F6E&gt;\uFF1A</p><ul><li>\u4E09\u8282\u70B9\u90E8\u7F72\uFF1A\u5982\u679C\u6574\u4E2A\u96C6\u7FA4\u4E2D\u6240\u6709\u8282\u70B9\u4E00\u5171\u53EA\u6709\u4E09\u4E2A\uFF0C\u5EFA\u8BAE\u628A\u4E09\u4E2A\u8282\u70B9\u5168\u90E8\u90E8\u7F72\u4E3A\u6570\u636E\u8282\u70B9\u548C\u5019\u9009\u8282\u70B9\u3002\u867D\u7136active master\u8282\u70B9\u4E00\u822C\u53EA\u8D1F\u8D23\u8F7B\u91CF\u7EA7\u4EFB\u52A1\u4E0D\u505A\u6570\u636E\u8282\u70B9\u3002\u4F46\u662F\u901A\u5E38\u6765\u8BF4\u4E09\u8282\u70B9\u96C6\u7FA4\u4E00\u822C\u4E0D\u4F1A\u627F\u8F7D\u5F88\u5927\u7684\u4E1A\u52A1\u91CF\uFF0C\u4E5F\u5C31\u4E0D\u5FC5\u8003\u8651\u90A3\u4E48\u591A\u4E86\u3002\u8FD9\u4E5F\u662F\u5904\u4E8E\u6210\u672C\u8003\u8651\u4E0D\u5F97\u5DF2\u800C\u4E3A\u4E4B\u3002\u4E09\u8282\u70B9\u96C6\u7FA4\u7684\u5BB9\u9519\u80FD\u529B\u662F1\uFF0C\u5373\u5141\u8BB8\u4E00\u53F0\u8282\u70B9\u6545\u969C\u3002</li><li>\u4E8C\u52A0\u4E00\u90E8\u7F72\uFF1A\u5373\u4E24\u4E2A\u5019\u9009\u8282\u70B9\uFF0C\u4E00\u4E2A\u4EC5\u6295\u7968\u8282\u70B9\uFF0C\u82E5\u5E72\u6570\u636E\u8282\u70B9\u3002\u8FD9\u79CD\u914D\u7F6E\u7684\u6700\u5927\u597D\u5904\u5C31\u662F\u5728\u4FDD\u8BC1\u9AD8\u53EF\u7528\u7684\u524D\u63D0\u4E0B\u6027\u4EF7\u6BD4\u66F4\u9AD8\uFF0C\u9002\u7528\u4E8E\u5C0F\u89C4\u6A21\u96C6\u7FA4\u3002\u7531\u4E8E\u5728\u907F\u514D\u8111\u88C2\u7684\u524D\u63D0\u4E0B\uFF0C\u8981\u9009\u4E3E\u51FA\u4E3B\u8282\u70B9\u7684\u6700\u5C0F\u8282\u70B9\u6570\u91CF\u662F3\uFF0C\u4E5F\u5C31\u662F\u9009\u4E3B\u7684\u5FC5\u8981\u6761\u4EF6\u662F\u7968\u6570\u8FC7\u534A\u4E5F\u5C31\u662F2\u7968\u3002\u800C\u5019\u9009\u8282\u70B9\u4E00\u822C\u662F\u4E0D\u8D1F\u8D23\u5176\u4ED6\u7684\u4EFB\u52A1\u7684\uFF0C\u4E5F\u5C31\u4E0D\u4F1A\u4E3A\u5176\u5206\u914Ddata\u89D2\u8272\uFF0C\u90A3\u4E48\u96C6\u7FA4\u901A\u5E38\u4F1A\u51FA\u73B0\u4E09\u4E2A\u8282\u70B9\u4E0D\u5B58\u653E\u6570\u636E\u7684\u5C40\u9762\u3002\u6B64\u65F6\u4F1A\u4EA7\u751F\u9020\u6210\u8D44\u6E90\u6D6A\u8D39\u3002\u56E0\u4E3A<code>active master</code>\u53EA\u5B58\u5728\u4E00\u4E2A\uFF0C\u53E6\u5916\u4E24\u4E2Amaster\u4F5C\u4E3A\u5019\u9009\u8282\u70B9\uFF0C\u5728\u53CA\u7FA4\u4F17\u4EC5\u4EC5\u662F\u5145\u5F53\u4E86\u8D1F\u8F7D\u5747\u8861\u5668\u3002\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u8D44\u6E90\u6D6A\u8D39\uFF0C\u901A\u5E38\u7684\u505A\u6CD5\u662F\u628A\u5176\u4E2D\u4E00\u4E2A\u5019\u9009\u8282\u70B9\u8BBE\u7F6E\u4E3A\u4EC5\u6295\u7968\u8282\u70B9\uFF0C\u5373<code>node.roles: [ data, master, voting_only ]</code>\uFF0C\u6B64\u65F6\uFF0C\u5F53\u524D\u8282\u70B9\u5728\u9009\u4E3E\u8FC7\u7A0B\u4E2D\uFF0C\u4EC5\u6709\u9009\u4E3E\u6743\u800C\u6CA1\u6709\u88AB\u9009\u4E3E\u6743\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u540C\u65F6\u7ED9\u4ED6\u5206\u914D\u6570\u636E\u8282\u70B9\u7684\u89D2\u8272\uFF0C\u56E0\u4E3A\u5176\u4E0D\u4F1A\u88AB\u9009\u4E3E\u4E3A<code>active master</code>\u3002\u4E09\u8282\u70B9\u96C6\u7FA4\u4E2D\uFF0C\u4E09\u4E2A\u8282\u70B9\u5FC5\u987B\u90FD\u5177\u6709<code>master</code>\u89D2\u8272\uFF0C\u5E76\u4E14\u4EC5\u6295\u7968\u8282\u70B9\u6700\u591A\u53EA\u80FD\u6709\u4E00\u4E2A\u3002\u4EC5\u6295\u7968\u8282\u70B9\u7531\u53EB<code>\u4EF2\u88C1\u8282\u70B9</code>\u8D77\u7740<code>\u51B3\u80DC\u7968</code>\u7684\u4F5C\u7528\u3002</li></ul></li>",1),qe=e("p",null,"\u591A\u8282\u70B9\u96C6\u7FA4",-1),Se=a("\u4E00\u65E6\u96C6\u7FA4\u589E\u957F\u5230\u4E09\u4E2A\u4EE5\u4E0A\u7684\u8282\u70B9\uFF0C\u53EF\u4EE5\u5F00\u59CB\u6839\u636E\u5B83\u4EEC\u7684\u804C\u8D23\u5BF9\u8FD9\u4E9B\u8282\u70B9\u505A\u804C\u8D23\u4E13\u4E00\u5316\u3002\u4E3B\u8981\u6839\u636E\u9700\u8981\u914D\u7F6E\u5C3D\u53EF\u80FD\u591A\u7684"),Pe={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-node.html#data-node",target:"_blank",rel:"noopener noreferrer"},Ae=a("\u6570\u636E\u8282\u70B9"),Be=a("\u3001"),je={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/ingest.html",target:"_blank",rel:"noopener noreferrer"},Ce=a("\u9884\u5904\u7406\u8282\u70B9"),Ge=a("\u3001"),Ue={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-node.html#ml-node",target:"_blank",rel:"noopener noreferrer"},Me=a("\u673A\u5668\u5B66\u4E60\u8282\u70B9"),Te=a("\u7B49\u6765\u5747\u8861\u5DE5\u4F5C\u8D1F\u8F7D\u3002\u968F\u7740\u96C6\u7FA4\u53D8\u5927\uFF0C\u4E00\u822C\u5EFA\u8BAE\u7ED9\u6BCF\u4E2A\u89D2\u8272\u4F7F\u7528\u4E13\u7528\u8282\u70B9\uFF0C\u4EE5\u4FBF\u4E3A\u6BCF\u4E2A\u4EFB\u52A1\u72EC\u7ACB\u6269\u5C55\u8D44\u6E90\u3002"),Re=e("p",null,"\u4F46\u662F\uFF0C\u6700\u597D\u5C06\u96C6\u7FA4\u4E2D\u5019\u9009\u8282\u70B9\u6570\u91CF\u9650\u5236\u4E3A\u4E09\u4E2A\u3002\u4E3B\u8282\u70B9\u4E0D\u50CF\u5176\u4ED6\u8282\u70B9\u7C7B\u578B\u90A3\u6837\u6269\u5C55\uFF0C\u56E0\u4E3A\u96C6\u7FA4\u603B\u662F\u53EA\u9009\u62E9\u5176\u4E2D\u4E4B\u4E00\u4F5C\u4E3A\u96C6\u7FA4\u7684\u4E3B\u8282\u70B9\u3002\u5982\u679C\u6709\u592A\u591A\u5019\u9009\u8282\u70B9\uFF0C\u90A3\u4E48\u4E3B\u9009\u4E3E\u53EF\u80FD\u9700\u8981\u66F4\u957F\u7684\u65F6\u95F4\u624D\u80FD\u5B8C\u6210\u3002\u5728\u8F83\u5927\u7684\u96C6\u7FA4\u4E2D\uFF0C\u4E00\u822C\u5EFA\u8BAE\u628A\u5019\u9009\u8282\u70B9\u8BBE\u7F6E\u4E3A\u4E13\u7528\u5019\u9009\u8282\u70B9\uFF0C\u5373\u4E0D\u5206\u914D\u5176\u4ED6\u89D2\u8272\uFF0C\u5E76\u907F\u514D\u5411\u8FD9\u4E9B\u4E13\u7528\u8282\u70B9\u53D1\u9001\u4EFB\u4F55\u5BA2\u6237\u7AEF\u8BF7\u6C42\u3002\u4EE5\u514D\u5019\u9009\u8282\u70B9\u88AB\u4E0D\u5FC5\u8981\u7684\u989D\u5916\u5DE5\u4F5C\u6240\u62D6\u7D2F\u5BFC\u81F4\u96C6\u7FA4\u670D\u52A1\u4E0D\u7A33\u5B9A\u3002",-1),ze=a("\u4F46\u662F\u53EF\u4EE5\u628A\u5019\u9009\u8282\u70B9\u4E4B\u4E00\u914D\u7F6E\u4E3A"),Ne={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-node.html#voting-only-node",target:"_blank",rel:"noopener noreferrer"},He=a("\u4EC5\u6295\u7968\u8282\u70B9"),Ie=a("\u4EE5\u4FBF\u5B83\u6C38\u8FDC\u4E0D\u4F1A\u88AB\u9009\u4E3A\u4E3B\u8282\u70B9\u3002\u4F8B\u5982\uFF0C\u96C6\u7FA4\u53EF\u80FD\u6709\u4E24\u4E2A\u4E13\u7528\u7684\u5019\u9009\u8282\u70B9\u548C\u4E00\u4E2A\u65E2\u662F\u6570\u636E\u8282\u70B9\u53C8\u662F\u4EC5\u6295\u7968\u7684\u5019\u9009\u8282\u70B9\u7684\u7B2C\u4E09\u4E2A\u8282\u70B9\u3002\u8FD9\u7B2C\u4E09\u4E2A\u4EC5\u6295\u7968\u8282\u70B9\u5C06\u5728Master\u9009\u4E3E\u4E2D\u6295\u51FA\u51B3\u80DC\u7968\uFF0C\u4F46\u662F\u81EA\u5DF1\u6C38\u8FDC\u4E0D\u4F1A\u88AB\u9009\u4E3E\u4E3Aactive master\u3002"),Le=e("h4",{id:"\u5927\u89C4\u6A21\u96C6\u7FA4",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u5927\u89C4\u6A21\u96C6\u7FA4","aria-hidden":"true"},"#"),a(" \u5927\u89C4\u6A21\u96C6\u7FA4")],-1),Ve=a("\u5355\u96C6\u7FA4 "),De=a("\u907F\u514D\u8DE8\u6570\u636E\u4E2D\u5FC3\uFF1AES\u5BF9\u7F51\u7EDC\u548C\u5BBD\u5E26\u8981\u6C42\u8F83\u9AD8\uFF0C\u5E76\u4E14\u4E00\u822C\u6765\u8BF4\u8981\u5C3D\u91CF\u907F\u514D\u670D\u52A1\u8DE8\u591A\u4E2A\u6570\u636E\u4E2D\u5FC3\u3002\u56E0\u4E3A\u4E00\u65E6\u9047\u5230\u5206\u533A\u6062\u590D\u95EE\u9898\uFF0C\u5B83\u5FC5\u987B\u91CD\u65B0\u540C\u6B65\u4EFB\u4F55\u4E22\u5931\u7684\u6570\u636E\u5E76\u91CD\u65B0\u5E73\u8861\u96C6\u7FA4\u3002\u5982\u679C\u4E00\u5B9A\u8981\u8DE8\u591A\u4E2A\u6570\u636E\u4E2D\u5FC3\uFF0C\u5EFA\u8BAE\u5728\u6BCF\u4E2A\u6570\u636E\u4E2D\u5FC3\u90E8\u7F72\u72EC\u7ACB\u96C6\u7FA4\uFF0C\u7136\u540E\u914D\u7F6E"),Fe={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/modules-cross-cluster-search.html",target:"_blank",rel:"noopener noreferrer"},Oe=a("\u8DE8\u96C6\u7FA4\u641C\u7D22"),Ye=a("\u6216"),Je={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/xpack-ccr.html",target:"_blank",rel:"noopener noreferrer"},Ke=a("\u8DE8\u96C6\u7FA4\u590D\u5236"),Qe=a("\u3002"),We=a("\u90E8\u7F72\u5206\u7247\u5206\u914D\u611F\u77E5\uFF1A\u4E3A\u4E86\u964D\u4F4E\u5F53\u96C6\u7FA4\u51FA\u73B0\u5355\u4E2A\u6216\u533A\u57DF\u8282\u70B9\uFF08\u6BD4\u5982\u4E00\u4E2A\u673A\u67B6\uFF09\u5B95\u673A\u5BF9\u6574\u4E2A\u670D\u52A1\u9020\u6210\u7684\u5F71\u54CD\uFF0C\u4E00\u822C\u7B56\u7565\u662F\u901A\u8FC7"),Xe={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/allocation-awareness.html",target:"_blank",rel:"noopener noreferrer"},Ze=a("\u5206\u914D\u611F\u77E5\u6765\u5B9E\u73B0"),$e=a("\u3002"),ea=t("<li>\u53CC\u533A\u96C6\u7FA4\uFF1A <ul><li>\u5982\u679C\u96C6\u7FA4\u90E8\u7F72\u5728\u4E24\u4E2A\u533A\u57DF\u6BD4\u5982\u4E24\u4E2A\u673A\u623F\u5185\uFF0C\u5E94\u8BE5\u5728\u6BCF\u4E2A\u533A\u57DF\u4E2D\u62E5\u6709\u4E0D\u540C\u6570\u91CF\u7684\u5019\u9009\u8282\u70B9\uFF0C\u8FD9\u6837\u5728\u5176\u4E2D\u4E00\u4E2A\u533A\u57DF\u51FA\u73B0\u95EE\u9898\u7684\u65F6\u5019\uFF0C\u4F1A\u589E\u52A0\u53E6\u4E00\u4E2A\u533A\u57DF\u7684\u5B58\u6D3B\u6982\u7387\u3002\u6BD4\u5982\u4E24\u4E2A\u673A\u623F\u90E8\u7F72\u540C\u4E00\u4E2A\u96C6\u7FA4\uFF0C\u90A3\u4E48\u4E24\u4E2A\u673A\u623F\u7684\u5019\u9009\u8282\u70B9\u907F\u514D\u76F8\u7B49\uFF0C\u56E0\u4E3A\u6B64\u65F6\u5982\u679C\u4E00\u4E2A\u673A\u623F\u610F\u5916\u65AD\u7535\uFF0C\u4E24\u4E2A\u673A\u623F\u7684\u670D\u52A1\u90FD\u4F1A\u505C\u6B62\u3002\u914D\u7F6E\u5355\u6570\u6295\u7968\u8282\u70B9\u53EF\u907F\u514D\u6B64\u95EE\u9898\u3002\u6B64\u65F6\u5176\u4E2D\u4E00\u4E2A\u673A\u623F\u65AD\u7535\uFF0C\u670D\u52A1\u53EF\u7528\u7684\u6982\u7387\u4E3A50%\u3002</li><li>\u53CC\u533A\u96C6\u7FA4\u7406\u8BBA\u4E0A\u80FD\u5BB9\u5FCD\u4E00\u4E2A\u533A\u57DF\u7684\u6570\u636E\u4E22\u5931\uFF0C\u4F46\u4E0D\u662F\u4EFB\u610F\u4E00\u4E2A\u533A\u57DF\uFF0C\u6253\u4E2A\u6BD4\u65B9\uFF1A\u670D\u52A1\u90E8\u7F72\u5728\u4E24\u4E2A\u673A\u623F\uFF0C\u673A\u623FA\u548C\u673A\u623FB\uFF0C\u8981\u4E48\u662F\u4EC5\u5141\u8BB8A\u673A\u623F\u51FA\u73B0\u6545\u969C\u800C\u4E0D\u5141\u8BB8B\u673A\u623F\u51FA\u73B0\u6545\u969C\uFF0C\u4E5F\u5C31\u662FA\u673A\u623F\u65AD\u7535\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662FB\u673A\u623F\u65AD\u7535\u670D\u52A1\u4E2D\u65AD\uFF1B\u8981\u4E48\u662F\u4EC5\u5141\u8BB8B\u673A\u623F\u51FA\u73B0\u6545\u969C\u800C\u4E0D\u5141\u8BB8A\u673A\u623F\u51FA\u73B0\u6545\u969C\uFF0C\u4E5F\u5C31\u662FB\u673A\u623F\u65AD\u7535\u670D\u52A1\u53EF\u7528\uFF0C\u4F46\u662FA\u673A\u623F\u65AD\u7535\u670D\u52A1\u4E2D\u65AD\u3002\u4ECE\u9AD8\u53EF\u7528\u7684\u89D2\u5EA6\u60F3\uFF0C\u6211\u4EEC\u66F4\u5E0C\u671B\u4EFB\u610F\u4E00\u4E2A\u673A\u623F\u65AD\u7535\uFF0C\u53E6\u4E00\u4E2A\u673A\u623F\u7684\u670D\u52A1\u90FD\u4E0D\u53D7\u5F71\u54CD\uFF0C\u4F46\u662F\u8FD9\u662F\u4E0D\u53EF\u80FD\u7684\u3002\u56E0\u4E3A\u6CA1\u6709\u65AD\u7535\u7684\u673A\u623F\u4E0D\u77E5\u9053\u51FA\u73B0\u6545\u969C\u7684\u673A\u623F\u662F\u65AD\u7F51\u4E86\u8FD8\u662F\u65AD\u7535\u4E86\uFF0C\u4E5F\u5C31\u4E0D\u77E5\u9053\u5E94\u8BE5\u662F\u53D1\u8D77\u72EC\u7ACB\u9009\u4E3E\u8FD8\u662F\u7B49\u5F85\u4E0B\u53BB\u3002\u5982\u679C\u4E24\u4E2A\u673A\u623F\u90FD\u53EF\u4EE5\u72EC\u7ACB\u9009\u4E3B\uFF0C\u90A3\u4E48\u5C31\u65E0\u6CD5\u907F\u514D\u8111\u88C2\uFF0C\u53EF\u80FD\u4F1A\u4EA7\u751F\u4E24\u4E2A\u673A\u623F\u9009\u51FAactive master\u3002\u89E3\u51B3\u529E\u6CD5\u662F\u5728\u4E24\u4E2A\u533A\u57DF\u4E2D\u90FD\u914D\u7F6E\u4E00\u4E2A\u4EC5\u6295\u7968\u8282\u70B9\u5E76\u5728\u72EC\u7ACB\u7684\u7B2C\u4E09\u4E2A\u533A\u57DF\u6DFB\u52A0\u4E00\u4E2A\u989D\u5916\u7684\u5019\u9009\u8282\u70B9\u3002\u8FD9\u6837\u4E24\u4E2A\u533A\u57DF\u5176\u4E2D\u4E4B\u4E00\u65AD\u7535\uFF0C\u989D\u5916\u7684\u6295\u7968\u8282\u70B9\u5C31\u53EF\u4EE5\u6295\u51FA\u5173\u952E\u7968\u3002\u8FD9\u4E2A\u989D\u5916\u7684\u8282\u70B9\u4E5F\u53EB<code>\u4E13\u7528tiebreaker</code>\u8282\u70B9\uFF0C\u6B64\u8282\u70B9\u53EF\u4EE5\u7528\u4F4E\u914D\u670D\u52A1\u5668\u3002</li></ul></li><li>\u591A\u533A\u96C6\u7FA4 <ul><li>\u5982\u679C\u96C6\u7FA4\u4E2D\u6709\u4E09\u4E2A\u533A\u57DF\uFF0C\u90A3\u4E48\u6BCF\u4E2A\u533A\u57DF\u4E2D\u5E94\u8BE5\u6709\u4E00\u4E2A\u5019\u9009\u8282\u70B9\u3002\u5982\u679C\u96C6\u7FA4\u5305\u542B\u4E09\u4E2A\u4EE5\u4E0A\u7684\u533A\u57DF\uFF0C\u90A3\u4E48\u5E94\u8BE5\u9009\u62E9\u5176\u4E2D\u7684\u4E09\u4E2A\u533A\u57DF\uFF0C\u5E76\u5728\u8FD9\u4E09\u4E2A\u533A\u57DF\u4E2D\u7684\u6BCF\u4E00\u4E2A\u533A\u57DF\u4E2D\u653E\u7F6E\u4E00\u4E2A\u5019\u9009\u8282\u70B9\u3002\u8FD9\u610F\u5473\u7740\u5373\u4F7F\u5176\u4E2D\u4E00\u4E2A\u533A\u57DF\u53D1\u751F\u6545\u969C\uFF0C\u96C6\u7FA4\u4ECD\u7136\u53EF\u4EE5\u9009\u4E3E\u4E3B\u8282\u70B9\u3002</li></ul></li><li>\u591A\u96C6\u7FA4 <ul><li>Elasticsearch\u662F\u4E3B\u4ECE\u7ED3\u6784\uFF0C\u4E3B\u8282\u70B9\u80FD\u7BA1\u7406\u7684\u8282\u70B9\u4E0A\u7EBF\u4E00\u822C\u4E0D\u8D85\u8FC7\u4E00\u5343\u4E2A\uFF0C\u5982\u679C\u7EE7\u7EED\u589E\u52A0\u8282\u70B9\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4active master\u4E0D\u7A33\u5B9A\uFF0C\u5982\u679C\u96C6\u7FA4\u60F3\u7A81\u7834\u96C6\u7FA4\u89C4\u6A21\u5E26\u6765\u7684\u6027\u80FD\u74F6\u9888\uFF0C\u4E00\u822C\u53EF\u914D\u7F6E\u591A\u96C6\u7FA4\uFF0C\u5229\u7528\u8DE8\u96C6\u7FA4\u641C\u7D22\u5355\u4E2A\u8D85\u5927\u96C6\u7FA4\u62C6\u5206\u6210\u591A\u4E2A\u5C0F\u96C6\u7FA4\uFF08\u76F8\u5BF9\u5C0F\uFF0C\u5343\u8282\u70B9\u7EA7\u522B\uFF09\u6765\u5B8C\u6210\u5BF9\u96C6\u7FA4\u7684\u6027\u80FD\u6269\u5C55\u3002</li></ul></li>",3),aa=e("h4",{id:"\u603B\u7ED3",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u603B\u7ED3","aria-hidden":"true"},"#"),a(" \u603B\u7ED3")],-1),na=e("li",null,"\u96C6\u7FA4\u5E94\u8BE5\u81F3\u5C11\u6709\u4E24\u4E2A\u533A\u57DF\u5305\u542B\u6570\u636E\u8282\u70B9\u3002",-1),sa=a("\u9664\u4E86\u4E3B\u5206\u7247\u4E4B\u5916\uFF0C\u6BCF\u4E2A\u4E0D\u662F"),ta={href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/searchable-snapshots.html",target:"_blank",rel:"noopener noreferrer"},ia=a("\u53EF\u641C\u7D22\u5FEB\u7167\u7D22\u5F15\u7684\u7D22\u5F15"),la=a("\u90FD\u5E94\u8BE5\u6709\u6BCF\u4E2A\u4E3B\u5206\u7247\u7684\u81F3\u5C11\u4E00\u4E2A\u526F\u672C\u3002"),ra=e("li",null,"\u5206\u7247\u5206\u914D\u611F\u77E5\u914D\u7F6E\u4E3A\u907F\u514D\u5C06\u5206\u7247\u7684\u6240\u6709\u526F\u672C\u96C6\u4E2D\u5728\u5355\u4E2A\u533A\u57DF\u5185\u3002",-1),oa=e("li",null,"\u96C6\u7FA4\u81F3\u5C11\u6709\u4E09\u4E2A\u5019\u9009\u8282\u70B9\u3002\u8FD9\u4E9B\u8282\u70B9\u4E2D\u81F3\u5C11\u6709\u4E24\u4E2A\u4E0D\u662F\u4EC5\u6295\u7968\u8282\u70B9\uFF0C\u5747\u8861\u5206\u914D\u5728\u81F3\u5C11\u4E09\u4E2A\u533A\u57DF\u4E2D\u3002",-1),ca=e("li",null,"\u5BA2\u6237\u7AEF\u88AB\u914D\u7F6E\u4E3A\u5C06\u5176\u8BF7\u6C42\u53D1\u9001\u5230\u591A\u4E2A\u533A\u57DF\u4E2D\u7684\u8282\u70B9\uFF0C\u6216\u8005\u88AB\u914D\u7F6E\u4E3A\u4F7F\u7528\u8D1F\u8F7D\u5E73\u8861\u5668\u6765\u5E73\u8861\u4E00\u7EC4\u9002\u5F53\u7684\u8282\u70B9\u4E4B\u95F4\u7684\u8BF7\u6C42\u3002",-1);function da(pa,ua){const n=o("ExternalLinkIcon");return l(),r("div",null,[h,e("ul",null,[e("li",null,[m,e("a",_,[v,s(n)]),k,e("a",b,[g,s(n)]),f]),y]),w,e("p",null,[x,E,q,e("a",S,[P,s(n)]),A,e("a",B,[j,s(n)]),C,e("a",G,[U,s(n)]),M]),T,e("p",null,[R,e("a",z,[N,s(n)]),H]),I,e("p",null,[L,e("a",V,[D,s(n)]),F]),O,e("p",null,[Y,e("a",J,[K,s(n)]),Q,e("a",W,[X,s(n)]),Z]),e("h4",$,[ee,ae,e("a",ne,[se,s(n)]),te]),ie,e("ul",null,[e("li",null,[le,e("p",null,[re,e("a",oe,[ce,s(n)]),de])]),e("li",null,[pe,e("ul",null,[e("li",null,[ue,he,me,e("a",_e,[ve,s(n)]),ke,e("a",be,[ge,s(n)]),fe]),ye,we,xe])]),Ee,e("li",null,[qe,e("ul",null,[e("li",null,[e("p",null,[Se,e("a",Pe,[Ae,s(n)]),Be,e("a",je,[Ce,s(n)]),Ge,e("a",Ue,[Me,s(n)]),Te]),Re,e("p",null,[ze,e("a",Ne,[He,s(n)]),Ie])])])])]),Le,e("ul",null,[e("li",null,[Ve,e("ul",null,[e("li",null,[De,e("a",Fe,[Oe,s(n)]),Ye,e("a",Je,[Ke,s(n)]),Qe]),e("li",null,[We,e("a",Xe,[Ze,s(n)]),$e])])]),ea]),aa,e("ul",null,[na,e("li",null,[sa,e("a",ta,[ia,s(n)]),la]),ra,oa,ca])])}var _a=i(u,[["render",da],["__file","10.\u96C6\u7FA4\u5206\u5E03\u5F0F.html.vue"]]);export{_a as default};
