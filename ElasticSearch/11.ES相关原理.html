<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html"><meta property="og:site_name" content="敏鱼-BLOG"><meta property="og:title" content="ElasticSearch相关原理"><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="article:published_time" content="2022-08-14T00:00:00.000Z"><title>ElasticSearch相关原理 | 敏鱼-BLOG</title><meta name="description" content="知识笔记">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/minyu-blog/assets/style.5cd07695.css">
    <link rel="modulepreload" href="/minyu-blog/assets/app.2463d8bc.js"><link rel="modulepreload" href="/minyu-blog/assets/11.ES相关原理.html.b3301a2e.js"><link rel="modulepreload" href="/minyu-blog/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/minyu-blog/assets/11.ES相关原理.html.3ff11853.js"><link rel="prefetch" href="/minyu-blog/assets/intro.html.1ba6d965.js"><link rel="prefetch" href="/minyu-blog/assets/planet.html.79b84f5f.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.eb46486c.js"><link rel="prefetch" href="/minyu-blog/assets/slide.html.135c5cb0.js"><link rel="prefetch" href="/minyu-blog/assets/01.安装.html.d70b437c.js"><link rel="prefetch" href="/minyu-blog/assets/02.核心概念.html.4c741c59.js"><link rel="prefetch" href="/minyu-blog/assets/03.索引.html.2e9efbd5.js"><link rel="prefetch" href="/minyu-blog/assets/04.数据新增.html.9b836c46.js"><link rel="prefetch" href="/minyu-blog/assets/05.数据查询.html.33bfd238.js"><link rel="prefetch" href="/minyu-blog/assets/06.数据修改.html.f9ce78ad.js"><link rel="prefetch" href="/minyu-blog/assets/07.数据删除.html.678b61c5.js"><link rel="prefetch" href="/minyu-blog/assets/10.集群分布式.html.8f9a4bf6.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.39f6a453.js"><link rel="prefetch" href="/minyu-blog/assets/disable.html.80f682b9.js"><link rel="prefetch" href="/minyu-blog/assets/encrypt.html.ad84d6d2.js"><link rel="prefetch" href="/minyu-blog/assets/markdown.html.d5ad68cf.js"><link rel="prefetch" href="/minyu-blog/assets/page.html.56abba7d.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.3fabb2c5.js"><link rel="prefetch" href="/minyu-blog/assets/article10.html.6fcdf930.js"><link rel="prefetch" href="/minyu-blog/assets/article11.html.47195c39.js"><link rel="prefetch" href="/minyu-blog/assets/article12.html.de71f592.js"><link rel="prefetch" href="/minyu-blog/assets/article9.html.a14611d7.js"><link rel="prefetch" href="/minyu-blog/assets/01.基础知识.html.31efe352.js"><link rel="prefetch" href="/minyu-blog/assets/02.集群搭建.html.8f98d899.js"><link rel="prefetch" href="/minyu-blog/assets/03.Java-API.html.b67861a2.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.3b0394b2.js"><link rel="prefetch" href="/minyu-blog/assets/article1.html.a749530e.js"><link rel="prefetch" href="/minyu-blog/assets/article2.html.bc2555bb.js"><link rel="prefetch" href="/minyu-blog/assets/article3.html.dcc5bffb.js"><link rel="prefetch" href="/minyu-blog/assets/article4.html.5a736857.js"><link rel="prefetch" href="/minyu-blog/assets/article5.html.cf51f79b.js"><link rel="prefetch" href="/minyu-blog/assets/article6.html.03078202.js"><link rel="prefetch" href="/minyu-blog/assets/article7.html.cb17f6cd.js"><link rel="prefetch" href="/minyu-blog/assets/article8.html.34c95148.js"><link rel="prefetch" href="/minyu-blog/assets/404.html.4262efd5.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.c45bae2c.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.ee3401fd.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.229be731.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.fe6e7941.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.94e9139e.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.f9bfe2f2.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.8cb0c687.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.d727ec34.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.f3e05535.js"><link rel="prefetch" href="/minyu-blog/assets/intro.html.adb5bc50.js"><link rel="prefetch" href="/minyu-blog/assets/planet.html.f681d494.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.c7b194f0.js"><link rel="prefetch" href="/minyu-blog/assets/slide.html.4cdc0231.js"><link rel="prefetch" href="/minyu-blog/assets/01.安装.html.ae7cc900.js"><link rel="prefetch" href="/minyu-blog/assets/02.核心概念.html.852a88c5.js"><link rel="prefetch" href="/minyu-blog/assets/03.索引.html.6283a178.js"><link rel="prefetch" href="/minyu-blog/assets/04.数据新增.html.cef2c005.js"><link rel="prefetch" href="/minyu-blog/assets/05.数据查询.html.c4914a2a.js"><link rel="prefetch" href="/minyu-blog/assets/06.数据修改.html.00b683d8.js"><link rel="prefetch" href="/minyu-blog/assets/07.数据删除.html.174f445e.js"><link rel="prefetch" href="/minyu-blog/assets/10.集群分布式.html.d880c72c.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.904eea1c.js"><link rel="prefetch" href="/minyu-blog/assets/disable.html.5ef072b4.js"><link rel="prefetch" href="/minyu-blog/assets/encrypt.html.d6fc40d4.js"><link rel="prefetch" href="/minyu-blog/assets/markdown.html.b9369812.js"><link rel="prefetch" href="/minyu-blog/assets/page.html.3c61cfde.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.b286fb1b.js"><link rel="prefetch" href="/minyu-blog/assets/article10.html.c0b73c70.js"><link rel="prefetch" href="/minyu-blog/assets/article11.html.f4d47e62.js"><link rel="prefetch" href="/minyu-blog/assets/article12.html.7841dddc.js"><link rel="prefetch" href="/minyu-blog/assets/article9.html.afb81840.js"><link rel="prefetch" href="/minyu-blog/assets/01.基础知识.html.fe93125f.js"><link rel="prefetch" href="/minyu-blog/assets/02.集群搭建.html.59435b76.js"><link rel="prefetch" href="/minyu-blog/assets/03.Java-API.html.6333291c.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.ef5beced.js"><link rel="prefetch" href="/minyu-blog/assets/article1.html.c87430cb.js"><link rel="prefetch" href="/minyu-blog/assets/article2.html.9d5aedf5.js"><link rel="prefetch" href="/minyu-blog/assets/article3.html.710764fb.js"><link rel="prefetch" href="/minyu-blog/assets/article4.html.bfb983b0.js"><link rel="prefetch" href="/minyu-blog/assets/article5.html.b5d6cf5f.js"><link rel="prefetch" href="/minyu-blog/assets/article6.html.d78af4eb.js"><link rel="prefetch" href="/minyu-blog/assets/article7.html.0f2f271a.js"><link rel="prefetch" href="/minyu-blog/assets/article8.html.10c22626.js"><link rel="prefetch" href="/minyu-blog/assets/404.html.00632689.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.e9d8ae6d.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.8e38e13d.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.7d487e4d.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.b29dcdcc.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.84ac7897.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.cf8dacc8.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.64f3accf.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.0d95abe7.js"><link rel="prefetch" href="/minyu-blog/assets/index.html.dcccbdbe.js"><link rel="prefetch" href="/minyu-blog/assets/404.43adca49.js"><link rel="prefetch" href="/minyu-blog/assets/Layout.772dcadb.js"><link rel="prefetch" href="/minyu-blog/assets/Slide.b625e83a.js"><link rel="prefetch" href="/minyu-blog/assets/Blog.7f683be6.js"><link rel="prefetch" href="/minyu-blog/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/minyu-blog/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/minyu-blog/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/minyu-blog/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/minyu-blog/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/minyu-blog/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/minyu-blog/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/minyu-blog/assets/photoswipe.esm.092fbc15.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/minyu-blog/" class="brand"><img class="logo" src="/minyu-blog/whale.jpg" alt="敏鱼-BLOG"><!----><span class="site-name hide-in-pad">敏鱼-BLOG</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/minyu-blog/" class="nav-link" aria-label="Blog Home"><span class="icon iconfont icon-home"></span>Blog Home<!----></a></div><div class="nav-item hide-in-mobile"><a href="/minyu-blog/planet.html" class="nav-link" aria-label="Knowledge planet"><span class="icon iconfont icon-home"></span>Knowledge planet<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://gitee.com/jaydiao/p8-project1" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/minyu-blog/" class="nav-link sidebar-link sidebar-page" aria-label="Blog Home"><span class="icon iconfont icon-home"></span>Blog Home<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/planet.html" class="nav-link sidebar-link sidebar-page" aria-label="Knowledge planet"><span class="icon iconfont icon-home"></span>Knowledge planet<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/article" class="nav-link sidebar-link sidebar-page" aria-label="所有文章"><span class="icon iconfont icon-tab"></span>所有文章<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable"><span class="icon iconfont icon-blog"></span><a href="/minyu-blog/RocketMQ/" class="title">RocketMQ</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/minyu-blog/RocketMQ/01.%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" class="nav-link sidebar-link sidebar-page" aria-label="01.基础知识"><span class="icon iconfont icon-article"></span>01.基础知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/RocketMQ/02.%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA.html" class="nav-link sidebar-link sidebar-page" aria-label="02.集群搭建"><span class="icon iconfont icon-article"></span>02.集群搭建<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/RocketMQ/03.Java-API.html" class="nav-link sidebar-link sidebar-page" aria-label="03.Java-API"><span class="icon iconfont icon-article"></span>03.Java-API<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading clickable active"><span class="icon iconfont icon-blog"></span><a href="/minyu-blog/ElasticSearch/" class="title">ElasticSearch</a><!----></p><ul class="sidebar-links"><li><!--[--><a href="/minyu-blog/ElasticSearch/01.%E5%AE%89%E8%A3%85.html" class="nav-link sidebar-link sidebar-page" aria-label="01.安装"><span class="icon iconfont icon-article"></span>01.安装<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/ElasticSearch/02.%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5.html" class="nav-link sidebar-link sidebar-page" aria-label="02.核心概念"><span class="icon iconfont icon-article"></span>02.核心概念<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/ElasticSearch/03.%E7%B4%A2%E5%BC%95.html" class="nav-link sidebar-link sidebar-page" aria-label="03.索引"><span class="icon iconfont icon-article"></span>03.索引<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/ElasticSearch/04.%E6%95%B0%E6%8D%AE%E6%96%B0%E5%A2%9E.html" class="nav-link sidebar-link sidebar-page" aria-label="04.数据新增"><span class="icon iconfont icon-article"></span>04.数据新增<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/ElasticSearch/05.%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2.html" class="nav-link sidebar-link sidebar-page" aria-label="05.数据查询"><span class="icon iconfont icon-article"></span>05.数据查询<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/ElasticSearch/06.%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9.html" class="nav-link sidebar-link sidebar-page" aria-label="06.数据修改"><span class="icon iconfont icon-article"></span>06.数据修改<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/ElasticSearch/07.%E6%95%B0%E6%8D%AE%E5%88%A0%E9%99%A4.html" class="nav-link sidebar-link sidebar-page" aria-label="07.数据删除"><span class="icon iconfont icon-article"></span>07.数据删除<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/minyu-blog/ElasticSearch/10.%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="10.集群分布式"><span class="icon iconfont icon-article"></span>10.集群分布式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="11.ES相关原理"><span class="icon iconfont icon-article"></span>11.ES相关原理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#一、master选举" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="一、master选举"><!---->一、master选举<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-1、设计思路" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1、设计思路"><!---->1.1、设计思路<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-2、es的选举算法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2、ES的选举算法"><!---->1.2、ES的选举算法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-3、选举过程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3、选举过程"><!---->1.3、选举过程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-4、脑裂问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4、脑裂问题"><!---->1.4、脑裂问题<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#二、写入原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="二、写入原理"><!---->二、写入原理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#三、系统架构" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="三、系统架构"><!---->三、系统架构<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#四、路由计算" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="四、路由计算"><!---->四、路由计算<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-tab"></span>ElasticSearch相关原理</h1><div class="page-info"><span class="author-info" aria-label="Author🖊" data-balloon-pos="down" localizeddate="August 14, 2022" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://mrhope.site" target="_blank" rel="noopener noreferrer">帅栗</a></span><span property="author" content="帅栗"></span></span><!----><span class="date-info" aria-label="Writing Date📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>August 14, 2022</span><meta property="datePublished" content="2022-08-14T00:00:00.000Z"></span><span class="category-info" aria-label="Category🌈" data-balloon-pos="down" localizeddate="August 14, 2022" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category0 clickable" role="navigation">ElasticSearch</li><meta property="articleSection" content="ElasticSearch"></ul></span><!----><span class="reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down" localizeddate="August 14, 2022" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 10 min</span><meta property="timeRequired" content="PT10M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">On This Page</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#一、master选举" class="router-link-active router-link-exact-active toc-link level2">一、master选举</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-1、设计思路" class="router-link-active router-link-exact-active toc-link level3">1.1、设计思路</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-2、es的选举算法" class="router-link-active router-link-exact-active toc-link level3">1.2、ES的选举算法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-3、选举过程" class="router-link-active router-link-exact-active toc-link level3">1.3、选举过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#_1-4、脑裂问题" class="router-link-active router-link-exact-active toc-link level3">1.4、脑裂问题</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#二、写入原理" class="router-link-active router-link-exact-active toc-link level2">二、写入原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#三、系统架构" class="router-link-active router-link-exact-active toc-link level2">三、系统架构</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/minyu-blog/ElasticSearch/11.ES%E7%9B%B8%E5%85%B3%E5%8E%9F%E7%90%86.html#四、路由计算" class="router-link-active router-link-exact-active toc-link level2">四、路由计算</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="elasticsearch相关原理" tabindex="-1"><a class="header-anchor" href="#elasticsearch相关原理" aria-hidden="true">#</a> ElasticSearch相关原理</h1><h2 id="一、master选举" tabindex="-1"><a class="header-anchor" href="#一、master选举" aria-hidden="true">#</a> 一、master选举</h2><h3 id="_1-1、设计思路" tabindex="-1"><a class="header-anchor" href="#_1-1、设计思路" aria-hidden="true">#</a> 1.1、设计思路</h3><p>所有分布式系统都需要解决数据的一致性问题，处理这类问题一般采取两种策略：</p><ul><li>避免数据不一致情况的发生</li><li>定义数据不一致后的处理策略</li></ul><p>通过一个简单的例子解释： 假设有一个单节点系统，对于此示例，可以认为我们的节点是一个只存储一个值的数据库服务器。我们还有一个客户端去向服务器发送存储的值，在单节点的时候，存的这个值很容易达成一致或者共识。但是，如果我们有多个节点，那么怎么达成共识呢？这就是分布式一致性的问题。</p><h3 id="_1-2、es的选举算法" tabindex="-1"><a class="header-anchor" href="#_1-2、es的选举算法" aria-hidden="true">#</a> 1.2、ES的选举算法</h3><p>ES基于Bully和Paxos两种算法实现，而并非就是两种算法或之一。 ES 7.x 基于以上算法，加入了基于Raft的优化。</p><ul><li>Bully：Bully是Leader选举的基本算法之一，基本原理就是按照节点ID进行排序，任何时候当前Leader的节点ID都是集群中最高节点ID。该算法非常易于实现但是当Leader处于不稳定状态的时候，如因负载过重而假死，此时可能会触发选主，选出第二大ID的节点为新的Leader。ES通过推迟选举直到Master失效（Master放弃Active Master资格触发选举）来解决问题，但是会产生双主或多主（也就是脑裂）问题。</li><li>Paxos：Paxos非常强大，在选举方面的灵活性比Bully算法有很大的优势，但是其原理非常复杂。</li><li>Raft：Raft是一种使用较为广泛的分布式一致性的协议，在Raft中，节点可能的状态有三种： <ul><li>Leader：主节点</li><li>Candidate：候选节点</li><li>Follower：跟随节点</li></ul></li></ul><p>所有的节点开始都是跟随节点。如果跟随节点收不89到领导节点的信号，则他们可以成为候选节点候选节点接着请求其他节点投票节点将以他们的投票回复候选节点如果候选节点获取到大多数节点的投票，则他将会成为领导节点此过程称为Leader选举。此时，所有对系统的修改将通过Leader节点进行。任意改变将以entry的形式添加到节点的日志中。这个日志的entry此时是没有提交的，所以，它不会更新节点的值。为了提交entry，节点首先会备份至跟随节点，然后leader等待，知直到多数节点将entry写入（自己的日志），此时Leader节点将提交entry，并且节点的数据被修改，接着Leader通知其他跟随者entry已经被提交了。此时集群的系统状态称为一致的。这个过程称为日志复制</p><p>在Raft中有两个设置超时时间的地方去控制选举 <strong>选举超时</strong>： 此时间就是跟随节点等待Leader信号直到成为候选节点的时间。选举超时时间随机设置在150ms到300ms之间。当选举超时以后，跟随节点成为候选节点，然后为自己发起一轮新的选举，并且向其他节点发起投票请求。如果收到请求的节点本轮没有发出投票，则候选节点的投票。并且节点重置选举超时时间 一旦候选节点收到大多数投票，那么他将成为Leader。Leader开始对其他跟随节点发送追加entry的消息。这些消息按心跳超时指定的时间间隔发送。跟随节点接着响应每一个追加entry的消息。在选举任期持续直到跟随节点停止接收到心跳消息，并成为候选节点。 <strong>重新选举</strong>： 和Leader选举一样。要求大多数投票，保证了本期选举只能有一个Leader被选中。如果两个节点同时成为候选节点，则会发送分裂投票。 <strong>分裂投票</strong>： 两个节点在同一期间都开始选举，并且每个都在其他节点之前到达一个单一节点。此时，每个候选节点都有两票，并且本次投票无法再收到更多投票，则节点将等待新的选举并重试。</p><h4 id="候选节点与投票节点" tabindex="-1"><a class="header-anchor" href="#候选节点与投票节点" aria-hidden="true">#</a> 候选节点与投票节点</h4><ul><li>**候选节点：**具备<code>master</code>角色的节点默认都有“被选举权”，即是一个候选节点。候选节点可以参与Master选举过程</li><li>**投票节点：**每个候选节点默认都有投票权，即每个候选节点默认都是一个投票节点，但如果配置了“voting_only ”的候选节点将只有选举权而没有被选举权，即仅投票节点。</li></ul><h4 id="有效选票与法定票数" tabindex="-1"><a class="header-anchor" href="#有效选票与法定票数" aria-hidden="true">#</a> 有效选票与法定票数</h4><ul><li><strong>有效选票</strong>：包括非候选节点的所有节点都会参与选举并参与投票，但是只有投票节点的投票才是有效投票。</li><li><strong>法定票数</strong>：即当选Master所需的最小票数，可通过：discovery.zen.minimum_master_nodes配置，通常情况下法定票数为投票数过半（不包含一半）。为了避免平票而导致脑裂，一般候选节点数量一般设置为奇数，即便是偶数，系统默认也会阉割掉其中一个节点的投票权，以保证不出选平票或多主。</li></ul><h3 id="_1-3、选举过程" tabindex="-1"><a class="header-anchor" href="#_1-3、选举过程" aria-hidden="true">#</a> 1.3、选举过程</h3><h4 id="节点失效监测-faultdetection类" tabindex="-1"><a class="header-anchor" href="#节点失效监测-faultdetection类" aria-hidden="true">#</a> 节点失效监测：FaultDetection类</h4><p>在源码的描述文件中有这样一段描述：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>There are two fault detection processes running. The first is by the
master, to ping all the other nodes in the cluster and verify that they
are alive. And on the other end, each node pings to master to verify if
its still alive or an election process needs to be initiated
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>NodesFaultDetection：即NodesFD，用于定期检查集群中的节点是否存活。</li><li>MasterFaultDetection：即MasterFD，作用是定期检查Master节点是否存活。</li></ol><p><img src="/minyu-blog/ElasticSearch/11/选举过程.png" alt=""></p><h3 id="_1-4、脑裂问题" tabindex="-1"><a class="header-anchor" href="#_1-4、脑裂问题" aria-hidden="true">#</a> 1.4、脑裂问题</h3><ul><li>何为脑裂：双主或多主</li><li>解决办法：discovery.zen.minimum_master_nodes=N/2+1，N为有效投票节点数。</li></ul><h2 id="二、写入原理" tabindex="-1"><a class="header-anchor" href="#二、写入原理" aria-hidden="true">#</a> 二、写入原理</h2><p><img src="/minyu-blog/ElasticSearch/11/写入原理.png" alt=""></p><ol><li>写入请求将数据写入到内存buffer。</li><li>默认（可设置）1s创建一个segment 文件，将数据存到磁盘。同时会对每一个请求，将操作记录下来，存到translog文件中，用于容灾备份。</li><li>segment会立马将数据同步到OS Cache，并将segment的status置为open，读请求可以访问，进行读操作。</li><li>OS Cache文件大小达到阈值或者默认（可设置）每30分钟，触发一次flush，将数据写入磁盘持久化。</li><li>.del 文件：在删除或者修改操作中，会将原有数据进行逻辑删除，标记位置为isdelete。</li><li>segment文件：提供读请求的数据。读写分离，使ES达到实时搜索。</li><li>Commit Point：记录当前可用的segment。当segment数量太多时，会触发合并操作，将相似的segment进行合并merge。紧接着执行flush操作。创建新的Commit Point标记，标记新的segment，删除旧的标记。将新的segment搜索状态打开，删除旧的segment文件。</li><li>translog文件：会记录每一次的请求操作。用于系统宕机之后的数据容灾备份。</li><li>flush操作：当OS Cache文件大小达到阈值、默认30分钟、或者手动触发。执行commit，将内存buffer中的数据立马写入到segment中，并将segment同步到OS Cache、开启open状态。OS Cache执行fsync同步磁盘操作。最后清空translog文件。 segment 和 translog 最终肯定都是写文件，但是两者是各自写各自的，不相干， segment 是索引类的文件，在写之前要经过大量的计算，比如分词、构建倒排索引等，它存的是索引相关的数据，而 translog 只是简单的追加数据增删改的操作记录，只是为了后面服务意外中止时通过回放这个记录来减少数据的丢失。segment 记录的数据与 translog 是不一样的。 那么涉及到写文件逻辑就一样了，都要 fsync 后才能保证真正落盘不丢数据，fsync 前数据是存在 OS 文件系统 Cache 里面的，如果服务意外中止，那么这部分数据就丢失了，即便重启也不会再 fsync。因此 translog 其实也是会丢数据的，所以才有translog 的相关参数(index.translog.sync_interval)来控制它 fsync 的频率，这个频率越高，丢的数据就越少。translog 一样会丢数据，要设置好相关参数，确保自己可以接受相应的数据丢失。</li></ol><h2 id="三、系统架构" tabindex="-1"><a class="header-anchor" href="#三、系统架构" aria-hidden="true">#</a> 三、系统架构</h2><p><img src="/minyu-blog/ElasticSearch/11/系统架构-1.png" alt=""></p><ul><li>一个运行中的 Elasticsearch 实例称为一个节点，而集群是由一个或者多个拥有相同cluster.name 配置的节点组成， 它们共同承担数据和负载的压力。当有节点加入集群中或者从集群中移除节点时，集群将会重新平均分布所有的数据。</li><li>当一个节点被选举成为主节点时， 它将负责管理集群范围内的所有变更，例如增加、删除索引，或者增加、删除节点等。 而主节点并不需要涉及到文档级别的变更和搜索等操作，所以当集群只拥有一个主节点的情况下，即使流量的增加它也不会成为瓶颈。 任何节 点都可以成为主节点。</li><li>作为用户，我们可以将请求发送到集群中的任何节点 ，包括主节点。 每个节点都知道任意文档所处的位置，并且能够将我们的请求直接转发到存储我们所需文档的节点。 无论我们将请求发送到哪个节点，它都能负责从各个包含我们所需文档的节点收集回数据，并将最终结果返回給客户端。 Elasticsearch 对这一切的管理都是透明的。</li></ul><h2 id="四、路由计算" tabindex="-1"><a class="header-anchor" href="#四、路由计算" aria-hidden="true">#</a> 四、路由计算</h2><ul><li><p>当索引一个文档的时候，文档会被存储到一个主分片中。 Elasticsearch 如何知道一个文档应该存放到哪个分片中呢？当我们创建文档时，它如何决定这个文档应当被存储在分片1 还是分片 2 中呢？首先这肯定不会是随机的，否则将来要获取文档的时候我们就不知道从何处寻找了。</p></li><li><p>实际上，这个过程是根据下面这个公式决定的：</p><p><img src="/minyu-blog/ElasticSearch/11/route-1.png" alt="image-20210826224922633"></p></li><li><p>routing 是一个可变值，默认是文档的 _id ，也可以设置成一个自定义的值。 routing 通过hash 函数生成一个数字，然后这个数字再除以 number_of_primary_shards （主分片的数量）后得到余数 。这个分布在 0 到 number_of_primary_shards-1 之间的余数，就是我们所寻求的文档所在分片的位置。这就解释了为什么我们要在创建索引的时候就确定好主分片的数量并且永远不会改变这个数量：因为如果数量变化了，那么所有之前路由的值都会无效，文档也再也找不到了。</p></li><li><p>所有的文档 API（ get 、 index 、 delete 、 bulk 、 update 以及 mget ）都接受一个叫做 routing 的路由参数 ，通过这个参数我们可以自定义文档到分片的映射。一个自定义的路由参数可以用来确保所有相关的文档——例如所有属于同一个用户的文档——都被 存储到同一个分片中。</p></li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://gitee.com/jaydiao/p8-project1/edit/main/demo/src/ElasticSearch/11.ES相关原理.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><!----><!----></footer><nav class="page-nav"><a href="/minyu-blog/ElasticSearch/10.%E9%9B%86%E7%BE%A4%E5%88%86%E5%B8%83%E5%BC%8F.html" class="nav-link prev" aria-label="10.集群分布式"><div class="hint"><span class="arrow left"></span>Prev</div><div class="link"><span class="icon iconfont icon-article"></span>10.集群分布式</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">Default footer</div><div class="copyright">Copyright © 2022 帅栗</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/minyu-blog/assets/app.2463d8bc.js" defer></script>
  </body>
</html>
